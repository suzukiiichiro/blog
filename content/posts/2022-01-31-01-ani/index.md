---
title: "pythonでNQueen（エイトクイーン）ブルートフォース　力任せ探索（2）"
description: "pythonを勉強しながらNQueen（エイトクイーン）問題を解いていきます。今回は第２回目。再帰の挙動などアルゴリズムを使わないブルートフォース力任せ探索についてプログラムの詳細部分を説明します。" 
date: 2022-01-27T15:55:55+09:00
draft: true 
image: chess.jpg
categories:
  - プログラミング
tags:
  - e-Stat 
  - データマイニング
  - プログラム
---
## グローバル変数
今回は、前回からの引き続きでブルートフォース力任せ探索のプログラムの詳細部分を説明します。  

プログラムのソースは以下のURLをご覧ください。

https://github.com/suzukiiichiro/N-Queens/blob/master/03Python/py01_nqueen.py  

まず、グローバル変数を見ていきましょう。

417~420行目で設定しています。
 
417行目 MAX、418行目 SIZEでNの数を指定します。
プログラムは8ですが、動作を説明するために4に変更してみてください。

```
MAX = 4
SIZE = 4

``` 
以降はN=4の問題として説明します。

419行目 ABOARDという配列を宣言しクイーンを置いていきます。
ABOARD = [0 for i in range(MAX)]で4個の要素を0で初期化しています。
ABOARD = [0,0,0,0] と同じです。
 
ABOARD[0]は1行目のクイーンを置く位置です0から7までの数字が入ります。
ABOARD[0]が3だと右から4番目にクイーンを置く感じになります。
 
420行目 COUNT=0 でCOUNTを初期化しています。

## nqueenメソッド
グローバル変数の宣言が終わったら441行目でnqueenメソッドが呼び出されます。

nqueenメソッドの全体的な動きは、
436-439行目で1行目から4行目まで１行に１個ずつクイーンを配置していきます。
4行目までクイーンを置き切ったら
434-434行目でprintoutメソッドを呼び出し、COUNT数と各行に置いたクイーンの場所を出力し再帰を抜けます。
 
各行を細かく説明しましょう。

433行目で global ABOARDとして変数宣言しています。
関数内でグローバル変数に値を代入したい場合は、変数宣言時にglobalをつける必要があります。
globalをつけないとローカル変数として扱われます。
ちなみに、私は試しに433行目を削除して実行してみたのですがエラーになりました。

434行目 if row is SIZE: はrowが4の時です。
if row == SIZE: としても今回は同じ動きになります。

437行目 for i in range(SIZE) は0からスタートしてSIZEの回数分0,1,2,3と1ずつインクリメントしながらfor文を回します。

438行目のABOARD[row]=iでクイーンを設置しています。
rowは行を意味します。0からスタートして0,1,2,3まであります。
例えば、0だと1行目、3だと4行目となります。

iはクイーンを設置する列になります。
0からスタートして0,1,2,3まであります。
例えば、0だと右から1列目、3だと右から4列目となります。

例えばABOARD[2]=3 の場合は
3行目は右から4列目にクイーンを置くことになります。

439行目のnqueen(row+1)で再帰的にnqueenメソッドを呼び出しています。

## 再帰の動きについて
再帰の呼び出しが実際にどういう動きになっているかは頭で考えても難しいので図を見ながら説明します。



例えばABOARD[3]=2とかだと




 

 
 ![図](q1.png "図")
 

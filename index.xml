<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>NLP</title><link>https://suzukiiichiro.github.io/</link><description>Recent content on NLP</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Thu, 06 Jan 2022 14:21:51 +0900</lastBuildDate><atom:link href="https://suzukiiichiro.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>シェルスクリプトをつかって、hugoで楽ちんにファイルを作成して編集できないかっていうはなし</title><link>https://suzukiiichiro.github.io/posts/2022-01-06-01-suzuki/</link><pubDate>Thu, 06 Jan 2022 14:21:51 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2022-01-06-01-suzuki/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2022-01-06-01-suzuki/2021-12-23-bash.jpg" alt="Featured image of post シェルスクリプトをつかって、hugoで楽ちんにファイルを作成して編集できないかっていうはなし" />&lt;h2 id="はじめに">はじめに&lt;/h2>
&lt;p>ここでは、hugoコマンドでnewする時に指定するファイル名を、シェルスクリプトを使ってなるべく簡便にあてはめてファイル生成しようというものです。&lt;/p>
&lt;p>hugo コマンドでgithub.ioディレクトリに記事を投稿する場合、以下のコマンドをたたくと思います。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ hugo new posts/＜ディレクトリ＞/index.md
&lt;/code>&lt;/pre>&lt;/div>&lt;p>または&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ hugo new posts/＜今日の日付＞.md
&lt;/code>&lt;/pre>&lt;/div>&lt;p>面倒なんですよね。。。&lt;/p>
&lt;h2 id="ディレクトリの指定">ディレクトリの指定&lt;/h2>
&lt;p>通常、記事毎にディレクトリを分けて、アクセスされるファイルをindex.mdにした場合は、以下の通りになりますよね。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ hugo new posts/＜今日の日付のディレクトリ＞/index.md
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ナンバリングの効用">ナンバリングの効用&lt;/h2>
&lt;p>ただ、同日に気分が乗ってきて、もう一つ記事を投稿しようとする場合は、日付の後ろに「-02」とか工夫する必要も出てきたりします。たとえば以下のように&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ hugo new posts/＜今日の日付のディレクトリ＞-＜ナンバリング02＞/index.md
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="複数メンバーの投稿を区別する">複数メンバーの投稿を区別する&lt;/h2>
&lt;p>複数のコラボレーターで投稿するgithub.ioの場合は、投稿者も区別したくなります。例えば&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ hugo new posts/＜今日の日付のディレクトリ＞-＜作成者＞-＜ナンバリング02＞/index.md
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ようするに、シェルスクリプトを使って、以下のコマンドを実行したい訳です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ hugo new posts/2022-01-06-01-suzuki/index.md
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="起動パラメータ">起動パラメータ&lt;/h2>
&lt;p>と、なると、パラメータは以下の三つとなりますね。&lt;br>
$today 今日の日付&lt;br>
$number 記事のナンバリング&lt;br>
$author 作成者&lt;/p>
&lt;h2 id="実行イメージ">実行イメージ&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 作成者 suzuki の 01 番目の投稿記事&lt;/span>
$ bash mkArticle.sh suzuki &lt;span class="m">01&lt;/span>
$ hugo new posts/&lt;span class="nv">$today&lt;/span>-&lt;span class="nv">$number&lt;/span>-&lt;span class="nv">$author&lt;/span>/index.md
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="気をつけるところは">気をつけるところは&lt;/h2>
&lt;h3 id="１パラメータを省略したときの挙動">１．パラメータを省略したときの挙動&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ bash mkArticle.sh
&lt;/code>&lt;/pre>&lt;/div>&lt;p>で、実行した場合に、「作成者が指定されていないからやりなおしてね」というのもちょっと寂しいものがあります。指定していなければ、都度、聞いてきて欲しいものです。そこで readコマンドで作成者を尋ねてくる感じにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$author&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;ユーザー名を半角で入力&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">read&lt;/span> author&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="同日ファイルの存在を確認">同日ファイルの存在を確認&lt;/h3>
&lt;p>２．すでに同日に一つ目の記事を投稿してある。要するに生成しようとしているファイルがすでに存在する場合の挙動です。こちらは、ファイルが存在していれば、１を応用して、別のナンバリングを指定するように尋ねてくれると良さそうです。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> &lt;span class="k">while&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="s2">&amp;#34;content/posts/&lt;/span>&lt;span class="nv">$today&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="nv">$author&lt;/span>&lt;span class="s2">/index.md&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2"> ファイルが既に存在します。&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;別のナンバリングを指定して下さい 02とか03とか&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">read&lt;/span> number&lt;span class="p">;&lt;/span>
&lt;span class="k">else&lt;/span>
break&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>ですので、ナンバリングの初期値は「01」としておいて、そのファイルが既に存在する場合は、あらためてユーザーにナンバリングを尋ねてくるという手法としました。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nv">number&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;01&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="実行方法">実行方法&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">$ bash mkArticle.sh suzuki 01&lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">前述のとおり作成者、ナンバリングは省略可能です。
$ bash mkArticle.sh
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ソース全文">ソース全文&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>
: &lt;span class="s1">&amp;#39;使い方
&lt;/span>&lt;span class="s1">一つ目のパラメーターに作成者を指定します
&lt;/span>&lt;span class="s1">二つ目のパラメータにナンバリングを指定します
&lt;/span>&lt;span class="s1">一つ目 01(未指定の場合は01）
&lt;/span>&lt;span class="s1">二つ目 02
&lt;/span>&lt;span class="s1">
&lt;/span>&lt;span class="s1">（例)
&lt;/span>&lt;span class="s1">$ bash mkArticle.sh suzuki 01;
&lt;/span>&lt;span class="s1">
&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="c1">#作成者 無指定であれば入力を促す&lt;/span>
&lt;span class="nv">author&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">#今日の日付&lt;/span>
&lt;span class="nv">today&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>date &lt;span class="s2">&amp;#34;+%Y-%m-%d%n&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">#今日のインデクス 一つ目の投稿であれば01 二つ目の投稿であれば02&lt;/span>
&lt;span class="nv">number&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$2&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="k">function&lt;/span> getParam&lt;span class="o">(){&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nv">number&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;01&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$author&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;ユーザー名を半角で入力&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">read&lt;/span> author&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -f &lt;span class="s2">&amp;#34;content/posts/&lt;/span>&lt;span class="nv">$today&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="nv">$author&lt;/span>&lt;span class="s2">/index.md&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2"> ファイルが既に存在します。&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;別のナンバリングを指定して下さい 02とか03とか&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">read&lt;/span> number&lt;span class="p">;&lt;/span>
&lt;span class="k">else&lt;/span>
break&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="k">function&lt;/span> execHugo&lt;span class="o">(){&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hugoコマンドを実行します&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hugo new posts/&lt;/span>&lt;span class="nv">$today&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">-&lt;/span>&lt;span class="nv">$author&lt;/span>&lt;span class="s2">/index.md&amp;#34;&lt;/span>
hugo new posts/&lt;span class="nv">$today&lt;/span>-&lt;span class="nv">$number&lt;/span>-&lt;span class="nv">$author&lt;/span>/index.md
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;ファイルの編集は以下の通りです。&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;vim content/posts/2022-01-06-01-suzuki/index.md;&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="c1"># パラメータの取得&lt;/span>
getParam&lt;span class="p">;&lt;/span>
&lt;span class="c1"># hugoコマンドの実行&lt;/span>
execHugo&lt;span class="p">;&lt;/span>
exit&lt;span class="p">;&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="おわりに">おわりに&lt;/h2>
&lt;p>色々とカスタマイズして、便利に記事投稿ができるとブログも盛り上がりますね。&lt;/p></description></item><item><title>GitHub Pagesを使って無料でSSL付きのサイトを公開</title><link>https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/</link><pubDate>Tue, 28 Dec 2021 12:07:19 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/settings.jpg" alt="Featured image of post GitHub Pagesを使って無料でSSL付きのサイトを公開" />&lt;p>デザイナーでもできる初めてのHugoの2回目になります。&lt;br>
&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-21/" >前回（デザイナーでもできる初めてのHugo #01）&lt;/a>はHugoのインストールから公開の方法までを説明しました。&lt;br>
今回は前回作成したページをGitHub Pagesを使って公開してみたいと思います。&lt;/p>
&lt;h2 id="github-pages用の設定ファイルを作成">GitHub Pages用の設定ファイルを作成&lt;/h2>
&lt;p>GitHub PagesはGitHubにあるコンテンツを静的ページを公開する機能です。&lt;br>
SSLまでついているので、非常に便利です。&lt;/p>
&lt;p>公開用のファイルは&lt;code>.github/workflows/gh-pages.yml&lt;/code>というYAML形式のファイルになります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml:.github/workflows/gh-pages.yml" data-lang="yaml:.github/workflows/gh-pages.yml">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># schedule:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># - cron: &amp;#39;*/10 * * * *&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">gh-pages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Checkout&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">persist-credentials&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch Hugo themes (true OR recursive)&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch all history for .GitInfo and .Lastmod&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># https://github.com/marketplace/actions/github-pages-action&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;latest&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">github_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gh-pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>name&lt;/strong>はGitHubでのActionsに表示される名前になります。&lt;br>
今回は公開用として&lt;strong>gh-pages&lt;/strong>というブランチにわけています。ここおらへんはお好みで設定して下さい。&lt;br>
hugoでテーマを使っている場合は&lt;strong>submodules: true&lt;/strong>とする必要があります。&lt;br>
また、Hugoで更新日をGitの日付と合わせたい場合は&lt;strong>fetch-depth: 0&lt;/strong>として、Gitの履歴を取得するようにしましょう。&lt;/p>
&lt;h2 id="github-pagesの設定">GitHub Pagesの設定&lt;/h2>
&lt;p>GitHub PagesのURLは&lt;code>https://ユーザまたは組織名.github.io/リポジトリ名&lt;/code>となります。&lt;br>
GitHubでリポジトリを作成する際に「ユーザまたは組織名.github.io」とすると「https://ユーザまたは組織名.github.io」とすることができます。&lt;/p>
&lt;p>まずは先程のファイルを含めてサイト全体をGitにアップして、gh-pagesというブランチが作られるのを待ちましょう。&lt;br>
その後に、setings &amp;gt; Pages にでGitHub Pagesの設定を行います。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 162;
flex-basis: 390px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/settings.jpg" data-size="980x603">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/settings.jpg"
width="980"
height="603"
srcset="https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/settings_hub5e89b620d2afe5c10cf3894738f1203_124480_480x0_resize_q75_box.jpg 480w, https://suzukiiichiro.github.io/posts/2021-12-28-hugo-02-ywat/settings_hub5e89b620d2afe5c10cf3894738f1203_124480_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="GitHub Pagesの設定">
&lt;/a>
&lt;figcaption>GitHub Pagesの設定&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>Your GitHub Pages site is currently being built from the gh-pages branch&lt;br>
にあるBranchをgh-pagesに変更します。&lt;br>
設定は以上です。&lt;/p>
&lt;p>Hugoの初期設定であれば&lt;code>publishDir: public&lt;/code>となっているので、GitHub Pagesではpublicがルートディレクトリとして公開されます。&lt;br>
.gitignoreに「public」を除外するようにしておきましょう。&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-:.gitignore" data-lang=":.gitignore">/public
/resources
&lt;/code>&lt;/pre>&lt;p>最後に設定したURLにアクセスするとサイトが確認できるはずです。&lt;/p>
&lt;h2 id="まとめ">まとめ&lt;/h2>
&lt;p>GitHub Pagesを使えば、難しいサーバの設定などをすることなく、無料でSSL付きのサイトを公開することが可能です。&lt;br>
いくつかの制限はありますが、すごく便利な機能なのでみなさんもぜひ使ってみてはいかがでしょうか。&lt;/p>
&lt;p>公開する際はパスワードなどの情報も一緒にアップしないようにしてください。&lt;/p>
&lt;h2 id="書籍の紹介">書籍の紹介&lt;/h2>
&lt;aside class="amazon-box">
&lt;a href="https://www.amazon.co.jp/gp/product/B07LBSWJNP/ref=as_li_tl?ie=UTF8&amp;amp;camp=247&amp;amp;creative=1211&amp;amp;creativeASIN=B07LBSWJNP&amp;amp;linkCode=as2&amp;amp;tag=nlpqueens-22&amp;amp;linkId=fd3f2918d16f32f53feccf492263133a" target="_blank">
&lt;div class="columns amazon-image">
&lt;img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;amp;MarketPlace=JP&amp;amp;ASIN=B07LBSWJNP&amp;amp;ServiceVersion=20070822&amp;amp;ID=AsinImage&amp;amp;WS=1&amp;amp;Format=_SL250_&amp;amp;tag=nlpqueens-22">
&lt;/div>
&lt;div class="columns amazon-info">
&lt;h2 class="amazon-name">いちばんやさしいGit&amp;amp;GitHubの教本 人気講師が教えるバージョン管理＆共有入門 「いちばんやさしい教本」シリーズ&lt;/h2>
&lt;p>
実際のワークフローをイメージしながら
実践的なGit/GitHubの使い方が身につく「いちばんやさしい」入門書です。
前半は、手元のパソコンでファイルを実際にバージョン管理しながら、
Gitの基本的な使い方を解説。
&lt;/p>
&lt;span class="link">Amazonで詳細を見る&lt;/span>
&lt;/div>
&lt;/a>
&lt;small>Amazon.co.jpアソシエイトを使用&lt;/small>
&lt;/aside>
&lt;aside class="amazon-box">
&lt;a href="https://www.amazon.co.jp/Web%E5%88%B6%E4%BD%9C%E8%80%85%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AEGitHub%E3%81%AE%E6%95%99%E7%A7%91%E6%9B%B8-%E3%83%81%E3%83%BC%E3%83%A0%E3%81%AE%E5%8A%B9%E7%8E%87%E3%82%92%E6%9C%80%E5%A4%A7%E5%8C%96%E3%81%99%E3%82%8B%E5%85%B1%E5%90%8C%E9%96%8B%E7%99%BA%E3%83%84%E3%83%BC%E3%83%AB-%E5%A1%A9%E8%B0%B7-%E5%95%93/dp/4844337009?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&amp;amp;crid=3C1ZNYZB4N0C3&amp;amp;keywords=github&amp;amp;qid=1640665205&amp;amp;sprefix=github%2Caps%2C284&amp;amp;sr=8-8&amp;amp;linkCode=ll1&amp;amp;tag=nlpqueens-22&amp;amp;linkId=65876fc9d77e695d11f02ec867bc8c4a&amp;amp;language=ja_JP&amp;amp;ref_=as_li_ss_tl" target="_blank">
&lt;div class="columns amazon-image">
&lt;img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;amp;ASIN=4844337009&amp;amp;Format=_SL250_&amp;amp;ID=AsinImage&amp;amp;MarketPlace=JP&amp;amp;ServiceVersion=20070822&amp;amp;WS=1&amp;amp;tag=nlpqueens-22&amp;amp;language=ja_JP">
&lt;/div>
&lt;div class="columns amazon-info">
&lt;h2 class="amazon-name">Web制作者のためのGitHubの教科書 チームの効率を最大化する共同開発ツール&lt;/h2>
&lt;p>
そろそろ「プルリ」しませんか?しくみを理解して使えば怖くない。リポジトリの作成から複数デザインの提示、「Pull Request」を使った分担作業まで、Webサイト制作を例に実践的なワークフローを身に付ける。
&lt;/p>
&lt;span class="link">Amazonで詳細を見る&lt;/span>
&lt;/div>
&lt;/a>
&lt;small>Amazon.co.jpアソシエイトを使用&lt;/small>
&lt;/aside></description></item><item><title>e-Statで面白いデータを探そう。ランキング上位「アイスクリーム」ってなんだ？</title><link>https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/</link><pubDate>Sun, 26 Dec 2021 21:54:39 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/anal.jpg" alt="Featured image of post e-Statで面白いデータを探そう。ランキング上位「アイスクリーム」ってなんだ？" />&lt;p>私のe-Statでのデータマイニングの現在の目的は以下の通りです&lt;br>
大量の政府公開データの中から&lt;br>
①面白そうなデータをピックアップする&lt;br>
②データをわかりやすくサマライズする&lt;br>
　・列情報などを必要な項目に絞り込む&lt;br>
　・前年度比５倍とか急激な変化があった場合をピックアップできるようにする&lt;br>
最終的にはこれらを自動でできるようにしたいです。&lt;/p>
&lt;p>今回は、まず①面白そうなデータをピックアップすることを目的にe-Statを見てみましょう。&lt;/p>
&lt;h2 id="ランキングページを見てみよう">ランキングページを見てみよう&lt;/h2>
&lt;p>e-Statのトップページ（https://www.e-stat.go.jp/）の画面の下の方にランキングという欄があります。&lt;br>
そのランキングの現在(2021/12/26)３位が「アイスクリーム」なんです。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 149;
flex-basis: 358px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/ranking.png" data-size="1434x960">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/ranking.png"
width="1434"
height="960"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/ranking_hu5dadec452d8bd9bb4d7577d888e43b5e_127374_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/ranking_hu5dadec452d8bd9bb4d7577d888e43b5e_127374_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ランキング">
&lt;/a>
&lt;figcaption>ランキング&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;h2 id="アイスクリームが含まれるのはどんなデータか">アイスクリームが含まれるのはどんなデータか&lt;/h2>
&lt;p>「アイスクリーム」は柔らかめのキーワードなので面白いデータの予感がします。&lt;br>
「アイスクリーム」が含まれるデータはどんなデータなんでしょうか？&lt;br>
ちょっと見てみましょう。&lt;/p>
&lt;p>&lt;a class="link" href="https://www.e-stat.go.jp/stat-search?page=1&amp;amp;query=%E3%82%A2%E3%82%A4%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%A0&amp;amp;layout=dataset" target="_blank" rel="noopener"
>https://www.e-stat.go.jp/stat-search?page=1&amp;query=%E3%82%A2%E3%82%A4%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%A0&amp;layout=dataset&lt;/a>&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 143;
flex-basis: 343px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/iceweblist.png" data-size="2144x1498">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/iceweblist.png"
width="2144"
height="1498"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/iceweblist_hue7cc00b95248977b49d9c465262cbdcd_468131_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/iceweblist_hue7cc00b95248977b49d9c465262cbdcd_468131_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="アイスクリーム">
&lt;/a>
&lt;figcaption>アイスクリーム&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>「アイスクリーム」が含まれるデータは7640件あるみたいです。&lt;br>
ちょっと多いですね。。。&lt;br>
検索条件なのですが、提供分類、表題を検索　データベース、ファイル内を検索にチェックがついています。&lt;br>
「検索のしかた」をみてみるとキーワードのOR検索やAND検索もできそうです。&lt;br>
&lt;figure
class="gallery-image"
style="
flex-grow: 134;
flex-basis: 323px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icewebsearchmethod.png" data-size="2110x1566">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icewebsearchmethod.png"
width="2110"
height="1566"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icewebsearchmethod_hu93293dc2bfe7d1c29535017dd6b31a46_524310_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icewebsearchmethod_hu93293dc2bfe7d1c29535017dd6b31a46_524310_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="検索のしかた">
&lt;/a>
&lt;figcaption>検索のしかた&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>ちなみに検索キーワードでの絞り込みはAPI(統計表情報取得)でももちろんできます。&lt;/p>
&lt;pre tabindex="0">&lt;code>curl &amp;quot;https://api.e-stat.go.jp/rest/3.0/app/getSimpleStatsList?appId=xxxxxxxxxx&amp;amp;searchWord=アイスクリーム&amp;quot;
&lt;/code>&lt;/pre>&lt;p>アイスクリームだと数が多すぎるので試しに「ガリガリ君」で検索してみましたが、0件でした。「ハーゲンダッツ」で検索したところ22件引っかかってきました。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 168;
flex-basis: 405px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/hagenlist.png" data-size="2048x1212">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/hagenlist.png"
width="2048"
height="1212"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/hagenlist_hu2fc48b6ec53a6bb1ca177d6aca1d85a9_370194_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/hagenlist_hu2fc48b6ec53a6bb1ca177d6aca1d85a9_370194_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ハーゲンダッツ">
&lt;/a>
&lt;figcaption>ハーゲンダッツ&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>「ハーゲンダッツ」どこに出てくるのかなと思ってAPIを一通り叩いてみたのですがAPIの実行結果からは「ハーゲンダッツ」は見つけられませんでした。&lt;br>
エクセル表示を見てみたところ、「銘柄」という項目に「バニラアイスクリーム，カップ入り（110mL入り），「ハーゲンダッツ バニラ」」とありました。&lt;br>
どうも全国のアイスクリームの価格を「ハーゲンダッツ　バニラ」を基準に算出しているみたいです。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 188;
flex-basis: 453px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1excel.png" data-size="1360x720">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1excel.png"
width="1360"
height="720"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1excel_hue69ec4e6af4f57f83b84afa986f8b0bc_139125_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1excel_hue69ec4e6af4f57f83b84afa986f8b0bc_139125_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="excel">
&lt;/a>
&lt;figcaption>excel&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>ちなみに、2020年だと１番安いのが長野市の221円で１番高いのが那覇市の300円でした。&lt;br>
&lt;figure
class="gallery-image"
style="
flex-grow: 199;
flex-basis: 478px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1rst.png" data-size="1990x998">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1rst.png"
width="1990"
height="998"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1rst_hue322c7afb8a1654734b465c6222623d4_212046_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1rst_hue322c7afb8a1654734b465c6222623d4_212046_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="統計表">
&lt;/a>
&lt;figcaption>統計表&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>単にハーゲンダッツの価格ってだけだと少しパンチ力弱いかもしれませんね。。。&lt;/p>
&lt;p>個人的には明治のスーパーカップが１位でジャンボモナカが２位でとかアイスクリーム売れ筋ランキングとかの方が楽しいのですが、政府はそこまで調べてくれないですよね。&lt;/p>
&lt;h2 id="小売統計調査とは">小売統計調査とは&lt;/h2>
&lt;p>小売物価統計調査はお米の価格から葬儀代まで約８００の小売価格を調査したデータ&lt;br>
調査結果は、年金等の給付見直しの際の基礎資料や、公共料金の上限値を決める際の資料として、幅広く利用されているそうです。&lt;br>
アイスクリームは約８００ある中の項目の一つです。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 178;
flex-basis: 429px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1column.png" data-size="2064x1154">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1column.png"
width="2064"
height="1154"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1column_hud83e50fd9037a6518d3a30b034ab02f7_1950832_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/icedetail1column_hud83e50fd9037a6518d3a30b034ab02f7_1950832_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="銘柄">
&lt;/a>
&lt;figcaption>銘柄&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>小売物価統計調査をピックアップするとしたら、ここ数年で値段が大きく変化しているものや地域間の差が特に大きいものとかですかね。&lt;/p>
&lt;p>「小売物価統計」でgoogle検索して面白そうな記事を見てみると&lt;br>
「今年のX’マスケーキは小さくなるか」という記事がありました。&lt;/p>
&lt;p>ケーキにもよく使われる小麦や油量種子はとりわけ高騰が目立つ&lt;br>
→&lt;br>
小売物価統計調査によると、東京都区部の小売価格で、今年11月の1kgあたりの小麦価格は1年前より約20円上昇した。食用油に至っては1kgあたり約60円と大幅な値上がりで、価格が比較的安定している食品の代名詞ともなってきた鶏卵でさえ、1パックあたり約12円上昇した。&lt;br>
→&lt;br>
クリスマスイブにケーキを買って帰る人も多いだろうが、今年は例年と比べて値段がほとんど同じなのにサイズが小さくなっていても不思議ではない。&lt;/p>
&lt;p>こんな感じのものは自動的にピックアップできると理想的なんですけどね。&lt;/p>
&lt;h2 id="今日のところのまとめ">今日のところのまとめ&lt;/h2>
&lt;p>自動的にピックアップするとしたら&lt;br>
・柔らかめのキーワード&lt;br>
・ここ数年間で値が急激に変化してるもの&lt;br>
・地域間の格差が大きいもの&lt;br>
ですかね。データを見ていって判定項目を増やしていきたいと思います。&lt;/p>
&lt;p>その他、アイスクリームでの検索結果には「家計調査」というのもありました。&lt;br>
家計の４半期での支出額の平均を出したものなのですが、アイスクリームの支出は当然夏が冬の倍くらい多い感じになってます。&lt;/p>
&lt;p>アイスクリームは当たり前ですが、その他季節によって大きく支出が違うものって何なのかは少し興味がありますね。&lt;br>
毎月や四半期ごとに値があるものについては、期間によって差が大きいものはピックアップしても良いかもしれませんね。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 116;
flex-basis: 279px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/kakei.png" data-size="1586x1360">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/kakei.png"
width="1586"
height="1360"
srcset="https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/kakei_hu134f38bd5ad256f8c70391b3da64abab_312038_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-26-01-ani/kakei_hu134f38bd5ad256f8c70391b3da64abab_312038_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="家計調査">
&lt;/a>
&lt;figcaption>家計調査&lt;/figcaption>
&lt;/figure>&lt;/p></description></item><item><title>e-Statのデータの見方</title><link>https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/</link><pubDate>Sat, 25 Dec 2021 21:55:55 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/anal.jpg" alt="Featured image of post e-Statのデータの見方" />&lt;p>今回は前回登場したデータの内容を調べてみましょう。&lt;br>
「統計表情報取得」（リスト取得）APIで取得したデータをもとにe-Statのサイト（https://www.e-stat.go.jp/）からデータを見つけてみましょう。&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;LIST_INF id=&amp;quot;0003384123&amp;quot;&amp;gt;
&amp;lt;STAT_NAME code=&amp;quot;00100409&amp;quot;&amp;gt;国民経済計算&amp;lt;/STAT_NAME&amp;gt;
&amp;lt;GOV_ORG code=&amp;quot;00100&amp;quot;&amp;gt;内閣府&amp;lt;/GOV_ORG&amp;gt;
&amp;lt;STATISTICS_NAME&amp;gt;四半期別ＧＤＰ速報 過去の値 1次速報値&amp;lt;/STATISTICS_NAME&amp;gt;
&amp;lt;TITLE&amp;gt;形態別国内家計最終消費支出 年度デフレータ—　前年度比（1981年～）（2000暦年＝100）&amp;lt;/TITLE&amp;gt;
&amp;lt;CYCLE&amp;gt;四半期&amp;lt;/CYCLE&amp;gt;
&amp;lt;SURVEY_DATE&amp;gt;201007-201009&amp;lt;/SURVEY_DATE&amp;gt;
&amp;lt;OPEN_DATE&amp;gt;2020-04-01&amp;lt;/OPEN_DATE&amp;gt;
&amp;lt;SMALL_AREA&amp;gt;0&amp;lt;/SMALL_AREA&amp;gt;
&amp;lt;/LIST_INF&amp;gt;
&lt;/code>&lt;/pre>&lt;h2 id="データを検索してみよう">データを検索してみよう&lt;/h2>
&lt;p>IDで検索できるのが一番良いのですが、キーワード検索のテキストフィールドに入力して検索してもダメでした。&lt;/p>
&lt;p>しょうが無いので、TITLE全文「形態別国内家計最終消費支出 年度デフレータ—　前年度比（1981年～）（2000暦年＝100）」で検索しましたがでダメでした。&lt;/p>
&lt;p>少し削って、「形態別国内家計最終消費支出 年度デフレータ—　前年度比」 だと４０５件。&lt;br>
多すぎるので、SURVEY_DATE、OPEN_DATEを使って調査年、調査月、公開年月で絞り込むと２件に絞り込めました。&lt;br>
あとはSTATISTICS_NAMEで特定できました。&lt;/p>
&lt;h2 id="詳細ページに行ってみましょう">詳細ページに行ってみましょう&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.e-stat.go.jp/stat-search/database?page=1&amp;amp;query=%E5%BD%A2%E6%85%8B%E5%88%A5%E5%9B%BD%E5%86%85%E5%AE%B6%E8%A8%88%E6%9C%80%E7%B5%82%E6%B6%88%E8%B2%BB%E6%94%AF%E5%87%BA%20%E5%B9%B4%E5%BA%A6%E3%83%87%E3%83%95%E3%83%AC%E3%83%BC%E3%82%BF%E2%80%94%E3%80%80%E5%89%8D%E5%B9%B4%E5%BA%A6%20%20%20%20%20%20%20&amp;amp;layout=dataset&amp;amp;year=20100&amp;amp;month=23070900&amp;amp;open_date=202004&amp;amp;statdisp_id=0003384123&amp;amp;metadata=1&amp;amp;data=1" target="_blank" rel="noopener"
>https://www.e-stat.go.jp/stat-search/database?page=1&amp;query=%E5%BD%A2%E6%85%8B%E5%88%A5%E5%9B%BD%E5%86%85%E5%AE%B6%E8%A8%88%E6%9C%80%E7%B5%82%E6%B6%88%E8%B2%BB%E6%94%AF%E5%87%BA%20%E5%B9%B4%E5%BA%A6%E3%83%87%E3%83%95%E3%83%AC%E3%83%BC%E3%82%BF%E2%80%94%E3%80%80%E5%89%8D%E5%B9%B4%E5%BA%A6%20%20%20%20%20%20%20&amp;layout=dataset&amp;year=20100&amp;month=23070900&amp;open_date=202004&amp;statdisp_id=0003384123&amp;metadata=1&amp;data=1&lt;/a>&lt;/p>
&lt;p>上段が「統計表情報取得」の内容&lt;br>
&lt;figure
class="gallery-image"
style="
flex-grow: 147;
flex-basis: 355px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/list.png" data-size="1986x1342">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/list.png"
width="1986"
height="1342"
srcset="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/list_hu5d314213e6b3192530f77b816005c824_381643_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/list_hu5d314213e6b3192530f77b816005c824_381643_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="統計表情報">
&lt;/a>
&lt;figcaption>統計表情報&lt;/figcaption>
&lt;/figure>&lt;br>
下段が「メタ情報取得」の内容見たいです。&lt;br>
&lt;figure
class="gallery-image"
style="
flex-grow: 155;
flex-basis: 373px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/meta.png" data-size="1988x1278">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/meta.png"
width="1988"
height="1278"
srcset="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/meta_hu31ce838285791fd60ddd4f121b3decf8_248311_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/meta_hu31ce838285791fd60ddd4f121b3decf8_248311_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="メタ情報取得">
&lt;/a>
&lt;figcaption>メタ情報取得&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>DBをクリックするとグラフが表示されました。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 240;
flex-basis: 576px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei.png" data-size="1892x788">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei.png"
width="1892"
height="788"
srcset="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei_hu124fe87f1847cfac0453afe0f1b0ea67_189919_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei_hu124fe87f1847cfac0453afe0f1b0ea67_189919_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="グラフ">
&lt;/a>
&lt;figcaption>グラフ&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>行情報が「1981年度、1982年度、1983年度。。。」&lt;br>
列情報が「家計最終消費支出（再掲）、家計最終消費支出（再掲）_居住者家計の海外での直接購入、。。。」&lt;/p>
&lt;p>なんと、APIクリックすると丁寧にクエリを表示してくれました(API仕様書とか見る必要ないですね)。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 164;
flex-basis: 393px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/api.png" data-size="1962x1196">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/api.png"
width="1962"
height="1196"
srcset="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/api_hu76bd22dd2d5fa36b989bf3e0c65e8f8d_349632_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/api_hu76bd22dd2d5fa36b989bf3e0c65e8f8d_349632_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="API">
&lt;/a>
&lt;figcaption>API&lt;/figcaption>
&lt;/figure>&lt;br>
フォーマットもXML,JSON,CSVが選べますね。&lt;br>
私はCSVの方が扱いやすいのでこれからはCSVでダウンロードすることにします。&lt;/p>
&lt;p>appIdがカラに空になっているので追加してcurlで叩くだけでいいですね。至れり尽くりです。&lt;/p>
&lt;pre tabindex="0">&lt;code>curl &amp;quot;http://api.e-stat.go.jp/rest/3.0/app/getSimpleStatsData?appId=xxxxxxx&amp;amp;lang=J&amp;amp;statsDataId=0003384123&amp;amp;metaGetFlg=Y&amp;amp;cntGetFlg=N&amp;amp;explanationGetFlg=Y&amp;amp;annotationGetFlg=Y&amp;amp;sectionHeaderFlg=1&amp;amp;replaceSpChars=0&amp;quot;
&amp;quot;tab_code&amp;quot;,&amp;quot;表章項目&amp;quot;,&amp;quot;cat01_code&amp;quot;,&amp;quot;形態別国内家計最終消費支出&amp;quot;,&amp;quot;time_code&amp;quot;,&amp;quot;時間軸（年度）&amp;quot;,&amp;quot;unit&amp;quot;,&amp;quot;value&amp;quot;,&amp;quot;annotation&amp;quot;
&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;11&amp;quot;,&amp;quot;家計最終消費支出（再掲）&amp;quot;,&amp;quot;1981100000&amp;quot;,&amp;quot;1981年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;3.8&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;11&amp;quot;,&amp;quot;家計最終消費支出（再掲）&amp;quot;,&amp;quot;1982100000&amp;quot;,&amp;quot;1982年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;2.3&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;11&amp;quot;,&amp;quot;家計最終消費支出（再掲）&amp;quot;,&amp;quot;1983100000&amp;quot;,&amp;quot;1983年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;2&amp;quot;,&amp;quot;&amp;quot;
.
.
.
&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;12&amp;quot;,&amp;quot;家計最終消費支出（再掲）_居住者家計の海外での直接購入&amp;quot;,&amp;quot;1981100000&amp;quot;,&amp;quot;1981年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;17.6&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;12&amp;quot;,&amp;quot;家計最終消費支出（再掲）_居住者家計の海外での直接購入&amp;quot;,&amp;quot;1982100000&amp;quot;,&amp;quot;1982年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;15.6&amp;quot;,&amp;quot;&amp;quot;
&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;12&amp;quot;,&amp;quot;家計最終消費支出（再掲）_居住者家計の海外での直接購入&amp;quot;,&amp;quot;1983100000&amp;quot;,&amp;quot;1983年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;-1.8&amp;quot;,&amp;quot;&amp;quot;
&lt;/code>&lt;/pre>&lt;h2 id="データの見方は">データの見方は？&lt;/h2>
&lt;p>DBで表示させた「統計表表示」と見比べてみると&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 240;
flex-basis: 576px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei.png" data-size="1892x788">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei.png"
width="1892"
height="788"
srcset="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei_hu124fe87f1847cfac0453afe0f1b0ea67_189919_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/tokei_hu124fe87f1847cfac0453afe0f1b0ea67_189919_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="グラフ">
&lt;/a>
&lt;figcaption>グラフ&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;quot;17&amp;quot;,&amp;quot;前年度比&amp;quot;,&amp;quot;11&amp;quot;,&amp;quot;家計最終消費支出（再掲）&amp;quot;,&amp;quot;1981100000&amp;quot;,&amp;quot;1981年度&amp;quot;,&amp;quot;％&amp;quot;,&amp;quot;3.8&amp;quot;,&amp;quot;&amp;quot;
&lt;/code>&lt;/pre>&lt;p>が１行目「1981年度」の１列目「家計最終消費支出（再掲）」に該当するみたいですね。&lt;br>
１セル、１行のデータ構造みたいですね。&lt;br>
１列目の情報がしばらく続いて、全行終わると次は２列目の情報みたいな構成だということがわかりました。&lt;/p>
&lt;h2 id="国民経済計算って何">国民経済計算って何&lt;/h2>
&lt;p>このデータは国民経済計算を算出したものということですが、国民経済計算ってなんでしょう？&lt;/p>
&lt;p>内閣府のサイトによると&lt;br>
国民経済計算は「四半期別ＧＤＰ速報」と「国民経済計算年次推計」の２つからなっている。「四半期別ＧＤＰ速報」は速報性を重視し、ＧＤＰをはじめとする支出側系列等を、年に８回四半期別に作成・公表している。「国民経済計算年次推計」は、生産・分配・支出・資本蓄積といったフロー面や、資産・負債といったストック面も含めて、年に１回作成・公表している。&lt;/p>
&lt;p>GDPを算出するための何かみたいですね。&lt;/p>
&lt;p>googleの検索結果を見てみると、国や地方自治体のサイトや経済学の解説サイトがメインで、たまに今年のGDPはどうだったという記事でちょっと書かれてたりしました。&lt;/p>
&lt;p>記事の中でちょっと気になったのは、&lt;br>
日本では新型コロナウイルスの影響で個人消費が落ち込んでおり、貯蓄が増加傾向にあります。内閣府の国民経済計算によると、2020年に消費されずに貯蓄に回ったお金は、一律10万円の特別定額給付金の影響もあり、35.8兆円に達しました。この額は前年の5倍の水準です。&lt;br>
所得に対する貯蓄の割合を示す家計貯蓄率は13.1%と19年度（3.7%）から大きく上昇した。&lt;/p>
&lt;p>前年度から比較して急激に大きくなったという部分(5倍も！)。こういうのは是非ピックアップしたいと思いました。&lt;/p>
&lt;h2 id="e-statでのマイニングの目的は">e-Statでのマイニングの目的は&lt;/h2>
&lt;p>とわ言え「国民経済計算」全般的に堅い感じですね。。。。&lt;/p>
&lt;p>私のe-Statマイニングの目的は大量の政府公開データに埋もれている中から人の興味を引きそうな面白そうなコンテンツをピックアップしてわかりやすくサマリーを表示することなのです。&lt;/p>
&lt;p>キーワードランキングを見てみると「アイスクリーム」「身長・体重の平均値」みたいな面白そうな柔らかめのコンテンツもあるんです。&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 149;
flex-basis: 358px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/ranking.png" data-size="1434x960">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/ranking.png"
width="1434"
height="960"
srcset="https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/ranking_hu5dadec452d8bd9bb4d7577d888e43b5e_127374_480x0_resize_box_3.png 480w, https://suzukiiichiro.github.io/posts/2021-12-25-01-ani/ranking_hu5dadec452d8bd9bb4d7577d888e43b5e_127374_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ランキング">
&lt;/a>
&lt;figcaption>ランキング&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>次回から、&lt;br>
・e-Statの森の中から面白いコンテンツを見つけよう&lt;br>
・うまくサマライズして表示しよう&lt;br>
　　興味深い列情報に絞りたい&lt;br>
　　前年度から５倍とか急激に変化した部分をピックアップして伝えたい&lt;br>
という視点からe-Statを調査していきたいと思います。&lt;/p></description></item><item><title>「UNIXという考え方―その設計思想と哲学」　メモ</title><link>https://suzukiiichiro.github.io/posts/2021-12-25-01-suzuki/</link><pubDate>Sat, 25 Dec 2021 09:25:50 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-25-01-suzuki/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-25-01-suzuki/2021-12-23-bash.jpg" alt="Featured image of post 「UNIXという考え方―その設計思想と哲学」　メモ" />&lt;h2 id="書籍の紹介">書籍の紹介&lt;/h2>
&lt;aside class="amazon-box">
&lt;a href="https://www.amazon.co.jp/gp/product/4274064069/ref=as_li_tl?ie=UTF8&amp;amp;camp=247&amp;amp;creative=1211&amp;amp;creativeASIN=4274064069&amp;amp;linkCode=as2&amp;amp;tag=nlpqueens-22&amp;amp;linkId=d045d50d407b75e179a1c786ee85e152" target="_blank">
&lt;div class="columns amazon-image">
&lt;img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;amp;MarketPlace=JP&amp;amp;ASIN=4274064069&amp;amp;ServiceVersion=20070822&amp;amp;ID=AsinImage&amp;amp;WS=1&amp;amp;Format=_SL250_&amp;amp;tag=nlpqueens-22">
&lt;/div>
&lt;div class="columns amazon-info">
&lt;h2 class="amazon-name">UNIXという考え方―その設計思想と哲学&lt;/h2>
&lt;p>
UNIX系のOSは世界で広く使われている。UNIX、Linux、FreeBSD、Solarisなど、商用、非商用を問わず最も普及したOSのひとつであろう。そしてこのOSは30年にわたって使用され続けているものでもある。なぜこれほど長い間使われてきたのか？ その秘密はUNIXに込められた数々の哲学や思想が握っている。
&lt;/p>
&lt;span class="link">Amazonで詳細を見る&lt;/span>
&lt;/div>
&lt;/a>
&lt;small>Amazon.co.jpアソシエイトを使用&lt;/small>
&lt;/aside>
&lt;h2 id="あらすじ">あらすじ&lt;/h2>
&lt;p>UNIX系のOSは世界で広く使われている。UNIX、Linux、FreeBSD、Solarisなど、商用、非商用を問わず最も普及したOSのひとつであろう。そしてこのOSは30年にわたって使用され続けているものでもある。なぜこれほど長い間使われてきたのか？ その秘密はUNIXに込められた数々の哲学や思想が握っている。&lt;/p>
&lt;p>そもそもUNIXはMulticsという巨大なOSの開発から生まれたものだ。あまりに巨大なMulticsはその複雑さゆえに開発は遅々として進まず、その反省からケン・トンプソンが作ったのがUNIXの初めとされる。その後デニス・リッチーら多数の開発者が携わり、UNIXは発展した。本書はこのUNIXに込められた「思想と哲学」を抽出し、数々のエピソードとともにUNIXの特徴を浮き彫りにしていく。&lt;/p>
&lt;p>たとえば本書で述べられているUNIXの発想のひとつとして「過度の対話式インタフェースを避ける」というものがある。UNIXのシステムは初心者には「不親切」なつくり、つまり親切な対話式のインタフェースはほとんどなく、ユーザーがコマンドを実行しようとするときはオプションをつける形をとっている。この形式はオプションをいちいち覚えねばならず、初心者に決してやさしくない。しかしこれはプログラムを小さく単純なものにし、他のプログラムとの結合性を高くする。そして結果としてUNIXのスケーラビリティと移植性の高さを支えることになっているのだ。このような形式で本書では9つの定理と10の小定理を掲げ、UNIXが何を重視し、何を犠牲にしてきたのかを明快に解説している。&lt;/p>
&lt;h2 id="このページはなんだ">このページはなんだ？&lt;/h2>
&lt;p>　という前置きはよいとして、心に余裕があれば、ぜひ本書を読んでいただきたい。全てのLinux初心者必携の書だ。そして、このページは何かというと、この本のエッセンスを抜粋した「メモ」という位置づけとしてとらえて欲しい。&lt;/p>
&lt;p>　一度、本を読んで頂ければ、このメモを見ればいつでもほんの情景がフィードバックされるはずだ。とうぜん、本を読まずしてこのメモを見てもいまいちちんぷんかんぷんかとは思う。&lt;/p>
&lt;p>　ただ、エッセンスからでも読み取れることも多い。&lt;/p>
&lt;p>　解決方法は皆さんにお任せする。&lt;/p>
&lt;h2 id="１小さいものは美しい">■１．小さいものは美しい&lt;/h2>
&lt;h3 id="抜粋">抜粋&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">　　小さなプログラムはわかりやすい
　　小さなプログラムは保守しやすい
　　小さなプログラムはシステムリソースに易しい
　　小さなプログラムは他のツールと組み合わせやすい
　　「伝統的なプログラマは、巨大なアメリカンプログラムによって、
　　　　世界中の全ての問題を一つのプログラムで解決しようとする。」
　　「プログラムの９０％はクズである。
　　　　ただしあらゆるものの９０％はクズである。」
　　パラメータが一行に収まらない
　　メソッドが画面に収まらない
　　コメントを読まないと何をやっているのか思い出せない
　　lsでモジュール名が多すぎて画面の端から消えていってしまう
　　まだ開発中なのにエラーメッセージの意味を思い出せない
　　整理するためにソースコードを印刷している自分に気がついた
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="エッセンス">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　「スモールイズビューティフル」
　　「伝統的なプログラマは、巨大なアメリカンプログラムによって、
　　　　世界中の全ての問題を一つのプログラムで解決しようとする。」
　　「プログラムの９０％はクズである。
　　　　ただしあらゆるものの９０％はクズである。」
&lt;/code>&lt;/pre>&lt;h2 id="２一つのプログラムには一つの事をうまくやらせる">■２．一つのプログラムには一つの事をうまくやらせる&lt;/h2>
&lt;h3 id="抜粋-1">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code class="language-　　a)ユーザーとの対話が必要か。パラメータではだめか" data-lang="　　a)ユーザーとの対話が必要か。パラメータではだめか">　　b)入力データは特殊フォーマットが必要か。フォーマット変換プログラムがすでにシステム上にないか。
　　c)出力データは特殊フォーマットが必要か。通常のASCIIファイルではだめか。
　　d)新しいプログラムを書かずとも似たような機能を持つ他のプログラムがあるのではないか。
　　「一つの事をうまくやるようにプログラムを作れないのであれば、
　　　　おそらく問題をまだ完全に理解していない。」
　　「しのびよる多機能主義。
　　　　プログラマはいつだってプログラムを遅くする方法を見つける。」
　　一つの事をうまくやるようにアプリケーションを書けば、それは必然的に小さなプログラムになる。
　　小さなプログラムは単一機能になる傾向があり、単一機能のプログラムは小さくなる傾向がある。
&lt;/code>&lt;/pre>&lt;h3 id="エッセンス-1">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　「わかることは分けること」
　　「UNIXユーザーは、自分が何をしているのかをわかっている。
　　　　何をしているのかわからないのなら、ここにいるべきではない」
　　「一つの事をうまくやるようにプログラムを作れないのであれば、
　　　　おそらく問題をまだ完全に理解していない。」
&lt;/code>&lt;/pre>&lt;h2 id="３出来るだけ早く試作する">■３．出来るだけ早く試作する&lt;/h2>
&lt;h3 id="抜粋-2">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　「試作によって学ぶ。早い試作はリスクを減らす。
　　　「正しく」やっている時間などない」
　　「なにができるか」
　　　　むしろ重要な事は、「なにができないか」を知る事だ。」
　　三つのシステム
　　１．第一のシステム
　　　第一のシステムは正しくやっている時間などない。
　　　第一のシステムは追い詰められた人間が作る。
　　　第一のシステムのコンセプトは人々の想像力を刺激する。
　　　第一のシステムは一人かせいぜい数人からなる小さなグループで作られる。
　　　第一のシステムは高い情熱によって推進され開発は急速に進む。
　　　第一のシステムは実に性能がよい。
　　２．第二のシステム
　　　第二のシステムは第一のシステムで証明されたアイデアを継承する。
　　　第二のシステムは委員会が設計する。
　　　第二のシステムは委員会によりものごとを全て公開の場で自分自身の正当化のために議論を進める。
　　　第二のシステムは第一のシステムの成功に便乗し分け前にあずかろうとする自称専門家で作られる。
　　　第二のシステムは自称専門家によりリポジトリ、進捗管理ツールが導入され計画は遅延する。
　　　第二のシステムは自称専門家のプログラムにおきかえられ贅肉がつき像のようにゆっくり動く。
　　　第二のシステムは「最初の設計のひどい欠点を見違えるように改善」され多機能となり無知が使う。
　　　第二のシステムは三つのシステムの中で最悪のシステムである。
　　３．第三のシステム
　　　第三のシステムはこれまでのシステムへの反抗から生まれる。
　　　第三のシステムの名前が変わり、オリジナルのアイデアはもはや常識となる。
　　　第三のシステムは第一と第二のシステムの最良の特徴を組み合わせる。
　　　第三のシステムは設計者にとってようやく「正しく」やる事が出来る。
　　　第三のシステムはユーザーが実際に使用する機能しか含まれない。
　　　第三のシステムはディスク、メモリ、CPUサイクルなど最適なバランスが実現されている。
　　　第三のシステムは提供される性能レベルも良くバランスがとれている。
　　第一のシステムとして「試作」を１ナノ秒でも早く作り、
　　　第一のシステムと第二のシステムのサイクルを反復と協調し、
　　　　第三のシステムに向かって協力しながら進んでいく。
&lt;/code>&lt;/pre>&lt;h3 id="エッセンス-2">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　「反復と協調」
　　「試作によって学ぶ。早い試作はリスクを減らす。
　　　「正しく」やっている時間などない」
　　「なにができるか」
　　　　むしろ重要な事は、「なにができないか」を知る事だ。」
&lt;/code>&lt;/pre>&lt;h2 id="４効率より移植性">■４．効率より移植性&lt;/h2>
&lt;h3 id="抜粋-3">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　UNIXにおいてそれはシェルスクリプトしかない。
　　次のハードウェアはもっと速く走る。だからプログラムを速くするという誘惑に負けない。
　　わずかな速度を求めてCで書き直さない。それは時間の無駄だ。
　　シェルスクリプトをあれこれいじる余裕が一瞬でも生じればほとんどのプログラマは
a) 新しい機能をいくつか付け加えようとする
　　　b) スクリプトそのものを洗練し、実行速度を高めようとする
　　　c) その一部、または大部分をCで書き直してパフォーマンスの向上を図ろうとする。
　　「最も効率の良い方法は、
　　　　ほとんどの場合「移植性」に欠ける。」
　　「移植か死か。優れたソフトウェアは移植され成長し、
　　　　それ以外は取り残され捨てられる。」
　　DQ1カートリッジ(64kb)用のコード
　　　自分のプログラマ人生で最も効率の良い、そして移植の難しいコード」を書いた。
　　　命令をデータとして扱い、データを命令として扱った。
　　　走査線が画面の右端から左端に引き返すまでの間を狙って命令を実行した。
　　　メモリ節約のためありとあらゆる技を駆使した。
　　　こうしてできあがったコードは芸術品と言えるほど見事なものだった。
　　　フォルクスワーゲンのビートルに２０人ほど詰め込むようなものだった。
　　　そして保守担当者にとっては究極の悪夢でもあった。
&lt;/code>&lt;/pre>&lt;h3 id="エッセンス-3">エッセンス&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">　bashとawkとsed
　　「最も効率の良い方法は、
　　　　ほとんどの場合「移植性」に欠ける。」
　　「移植か死か。優れたソフトウェアは移植され成長し、
　　　　それ以外は取り残され捨てられる。」
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="５出力結果はasciiフラットファイルに保存する">■５．出力結果はASCIIフラットファイルに保存する&lt;/h2>
&lt;h3 id="抜粋-4">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　「動かせないデータは死んだデータだ。」
　　出力結果はASCIIフラットファイルに保存する。
　　RDBを使わない。
　　中間ファイルをはき出さない。
&lt;/code>&lt;/pre>&lt;h3 id="エッセンス-4">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　中間ファイルは作らない　RDBは使わない
　　「動かせないデータは死んだデータだ。」
&lt;/code>&lt;/pre>&lt;h2 id="６ソフトウェアを梃子として使う">■６．ソフトウェアを梃子として使う　&lt;/h2>
&lt;h3 id="抜粋-5">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　梃子の支点をいかに自分のほうに近づける事が出来るか
　　独自技術症候群を避け、すでにあるものにクリエイティブな付加価値をつける
　　独自技術症候群は創造性を伸ばさない。
　　「良いプログラマはよいコードを書く。
　　　　偉大なプログラマは良いコードを借りてくる。」
&lt;/code>&lt;/pre>&lt;h3 id="エッセンス-5">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　「良いプログラマはよいコードを書く。
　　　　偉大なプログラマは良いコードを借りてくる。」
&lt;/code>&lt;/pre>&lt;h2 id="７シェルスクリプトによって梃子の効果と移植性を高めるパイプ">■７．シェルスクリプトによって梃子の効果と移植性を高める　パイプ&lt;/h2>
&lt;h3 id="抜粋-6">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　シェルスクリプトには恐ろしいほどの梃子の効果がある
　　シェルスクリプトは梃子の降下で時間も節約する
　　シェルスクリプトはCより移植性が高い
　　「熟練プログラマはシェルスクリプトを熱心に使う。
　　　　あなたもまたそうするべきだ。」
　　「UNIXの源流は高水準の抽象化モデル「シェルスクリプト」であり、
　　　　それは今も普遍である。」
　　「私は人生で二度しか奇跡を見た事がない。
　　　　一つは核融合、もう一つは複利だ
　　　少量のものを繰り返し掛け合わせていく事で、
　　　　やがて奇跡的な規模に達する。」アインシュタイン
　　シェルスクリプト一行はおよそ１万倍の複利を生む
```bash
　　echo who | awk '{ print $1 ; }' | sort | uniq | sed -e &amp;quot;s/ /, /g&amp;quot; ;
　　echo 177
　　who 755
　　awk 3411
　　sort 2614
　　uniq 302
　　sed 2093
-------------------------
　　　　 9.353
　　処理をパイプでつなぎ処理全体を一行で完結させる。
　　「ひとつのことをうまくやる」の良い事例だ。
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">　　&lt;span class="k">function&lt;/span> sh_func_getTitle&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
　　 &lt;span class="nv">TITLE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">URLGETOPT&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>　　 &lt;span class="k">while&lt;/span> &lt;span class="nb">read&lt;/span> line &lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span>
　　 &lt;span class="k">if&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$line&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> grep -i &lt;span class="s2">&amp;#34;title=&amp;#34;&lt;/span> &amp;gt; /dev/null&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
　　 &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$line&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>　　 sed -e &lt;span class="s2">&amp;#34;s/^.*title=\x27//g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>　　 -e &lt;span class="s2">&amp;#34;s/\x27.*&lt;/span>$&lt;span class="s2">//g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>　　 -e &lt;span class="s2">&amp;#34;s/\r//g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>　　 -e &lt;span class="s2">&amp;#34;s/&amp;lt;[^&amp;gt;]*&amp;gt;//g&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span>　　 -e &lt;span class="s2">&amp;#34;s/^[●○■□△▽]//g&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
　　 &lt;span class="k">fi&lt;/span>
　　 &lt;span class="k">done)&lt;/span>&lt;span class="p">;&lt;/span>
　　&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="エッセンス-6">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　「私は人生で二度しか奇跡を見た事がない。
　　　　一つは核融合、もう一つは複利だ
　　　　　少量のものを繰り返し掛け合わせていく事で、
　　　　　　やがて奇跡的な規模に達する。」
&lt;/code>&lt;/pre>&lt;h2 id="８全てのプログラムをフィルタとして設計する">■８．全てのプログラムをフィルタとして設計する&lt;/h2>
&lt;h3 id="抜粋-7">抜粋&lt;/h3>
&lt;p>　　メソッド間の入力をstdin、出力はstdoutを使用する&lt;br>
　　オンメモリでコマンドフィルタとして稼働する。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">　&lt;span class="k">function&lt;/span> trim&lt;span class="o">(){&lt;/span>
　　&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -p /dev/stdin &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
　 cat - &lt;span class="p">;&lt;/span>
　　&lt;span class="k">else&lt;/span>
&lt;span class="nb">echo&lt;/span> -n &lt;span class="p">;&lt;/span>
　　&lt;span class="k">fi&lt;/span> &lt;span class="p">|&lt;/span> sed -e &lt;span class="s1">&amp;#39;s/^ *//g&amp;#39;&lt;/span> -e &lt;span class="s1">&amp;#39;s/ *$//g&amp;#39;&lt;/span>
　&lt;span class="o">}&lt;/span>
　　実行結果
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; ほげ &amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> trim &lt;span class="p">;&lt;/span>
ほげ
&lt;/code>&lt;/pre>&lt;/div>&lt;p>　　以下でも良い。　　&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">　&lt;span class="k">function&lt;/span> trim&lt;span class="o">(){&lt;/span>
　　awk &lt;span class="s1">&amp;#39;{ print $1; }&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sed -e &lt;span class="s1">&amp;#39;s/^ *//g&amp;#39;&lt;/span> -e &lt;span class="s1">&amp;#39;s/ *$//g&amp;#39;&lt;/span> &amp;lt;/dev/stdin
　&lt;span class="o">}&lt;/span>
　　実行結果
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; ほげ &amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> trim &lt;span class="p">;&lt;/span>
ほげ
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="エッセンス-7">エッセンス&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">　　　メソッド間の入力をstdin、出力はstdoutを使用する
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="９並行して考える">■９．並行して考える&lt;/h2>
&lt;h3 id="抜粋-8">抜粋&lt;/h3>
&lt;p>　　並列処理が可能なメソッドを積極的に書く&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> 　　 メソッドの並列処理
　　 &lt;span class="m">1&lt;/span> &lt;span class="c1">#!/bin/bash&lt;/span>
　　 &lt;span class="m">2&lt;/span> cmd&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
　　 &lt;span class="m">3&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello, &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">!&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
　　 &lt;span class="m">4&lt;/span> &lt;span class="o">}&lt;/span>
　　 &lt;span class="m">5&lt;/span> &lt;span class="k">function&lt;/span> sh_xargs&lt;span class="o">(){&lt;/span>
　　 &lt;span class="m">6&lt;/span> 　&lt;span class="nb">export&lt;/span> -f cmd
　　 &lt;span class="m">7&lt;/span> 　yes &lt;span class="p">|&lt;/span> head -1000 &lt;span class="p">|&lt;/span> xargs -n1 -P4 -I % bash -c &lt;span class="s2">&amp;#34;cmd %&amp;#34;&lt;/span>
　　 &lt;span class="m">8&lt;/span> &lt;span class="o">}&lt;/span>
　　 &lt;span class="m">9&lt;/span> sh_xargs &lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="エッセンス-8">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　　並列処理が可能なメソッドを積極的に書く
&lt;/code>&lt;/pre>&lt;h2 id="１０木を守る">■１０．木を守る&lt;/h2>
&lt;h3 id="抜粋-9">抜粋&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　UNIXユーザーは紙のドキュメントを忌み嫌う。不要なドキュメントを印刷して整理する事はしない。
　　ソースコードが実体であり、高水準のドキュメントとなるようプログラムする。
&lt;/code>&lt;/pre>&lt;h3 id="エッセンス-9">エッセンス&lt;/h3>
&lt;pre tabindex="0">&lt;code>　　　UNIXはドキュメントを忌み嫌う
&lt;/code>&lt;/pre></description></item><item><title>知識ゼロからのe-Statマイニング</title><link>https://suzukiiichiro.github.io/posts/2021-12-23-10-ani/</link><pubDate>Fri, 24 Dec 2021 18:12:54 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-23-10-ani/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-23-10-ani/anal.jpg" alt="Featured image of post 知識ゼロからのe-Statマイニング" />&lt;p>知識ゼロからのe-Statマイニング&lt;br>
日頃から大量のデータを使ってデータマイニングしてみたいなと思って暇なときにサイトを巡回していたらe-Statという日本の統計が閲覧できる政府統計ポータルサイトを発見しました。&lt;br>
アイスの売り上げから子供の平均身長まで大量の統計資料が公開されており、しかもAPIまであるすごいサイトです。 このe-Statをマイニングしてみようと思います。&lt;br>
まずはAPIを叩くところまでやってみます。&lt;/p>
&lt;h2 id="まずはアプリケーションidを取得しよう">まずはアプリケーションIDを取得しよう&lt;/h2>
&lt;p>APIを叩くにはアプリケーションIDが必要です。&lt;br>
まずはアプリケーションIDを取得しましょう。&lt;br>
アプリケーションIDを取得するにはユーザー登録が必要です。以下のURLから手順に従ってユーザー登録してください。&lt;/p>
&lt;p>&lt;a class="link" href="https://www.e-stat.go.jp/mypage/user/preregister" target="_blank" rel="noopener"
>https://www.e-stat.go.jp/mypage/user/preregister&lt;/a>&lt;/p>
&lt;p>アプリケーションIDはログイン後マイページ内のAPI機能(アプリケーションID発行)で取得できます。&lt;/p>
&lt;p>&lt;a class="link" href="https://www.e-stat.go.jp/mypage/view/api" target="_blank" rel="noopener"
>https://www.e-stat.go.jp/mypage/view/api&lt;/a>&lt;/p>
&lt;p>入力項目は名称、URL、概要の３つです。&lt;br>
名称、概要は適当で大丈夫です。&lt;br>
URLは、http://localhostだと私はダメだったのでこのサイトのURLを設定しました。&lt;/p>
&lt;p>発行ボタンを押すとappIdにアプリケーションIDが払い出されます。&lt;/p>
&lt;h2 id="apiを叩いてみよう">APIを叩いてみよう&lt;/h2>
&lt;p>APIの仕様は以下のURLに記載されています。&lt;/p>
&lt;p>&lt;a class="link" href="https://www.e-stat.go.jp/api/api-info/e-stat-manual3-0" target="_blank" rel="noopener"
>https://www.e-stat.go.jp/api/api-info/e-stat-manual3-0&lt;/a>&lt;/p>
&lt;p>難しいです。&lt;br>
なんとなく、「統計表情報取得」でリストを取得して、「メタ情報取得」「統計データ取得」で個別のデータを取得する感じでしょうか？&lt;br>
まずは叩いてみます。&lt;/p>
&lt;h2 id="統計表情報取得">統計表情報取得&lt;/h2>
&lt;pre tabindex="0">&lt;code>curl &amp;quot;http://api.e-stat.go.jp/rest/1.0/app/getStatsList?appId=xxxxxxxxx&amp;amp;lang=J&amp;amp;searchKind=&amp;amp;searchWord=&amp;quot;
&amp;lt;LIST_INF id=&amp;quot;0003384123&amp;quot;&amp;gt;
&amp;lt;STAT_NAME code=&amp;quot;00100409&amp;quot;&amp;gt;国民経済計算&amp;lt;/STAT_NAME&amp;gt;
&amp;lt;GOV_ORG code=&amp;quot;00100&amp;quot;&amp;gt;内閣府&amp;lt;/GOV_ORG&amp;gt;
&amp;lt;STATISTICS_NAME&amp;gt;四半期別ＧＤＰ速報 過去の値 1次速報値&amp;lt;/STATISTICS_NAME&amp;gt;
&amp;lt;TITLE&amp;gt;形態別国内家計最終消費支出 年度デフレータ—　前年度比（1981年～）（2000暦年＝100）&amp;lt;/TITLE&amp;gt;
&amp;lt;CYCLE&amp;gt;四半期&amp;lt;/CYCLE&amp;gt;
&amp;lt;SURVEY_DATE&amp;gt;201007-201009&amp;lt;/SURVEY_DATE&amp;gt;
&amp;lt;OPEN_DATE&amp;gt;2020-04-01&amp;lt;/OPEN_DATE&amp;gt;
&amp;lt;SMALL_AREA&amp;gt;0&amp;lt;/SMALL_AREA&amp;gt;
&amp;lt;/LIST_INF&amp;gt;
&lt;/code>&lt;/pre>&lt;p>LIST_INF idの「0003384123」」が個別データのidみたいです。これを使ってメタ情報取得、統計情報取得を呼び出します。&lt;/p>
&lt;p>##メタ情報取得&lt;/p>
&lt;pre tabindex="0">&lt;code>curl &amp;quot;http://api.e-stat.go.jp/rest/1.0/app/getMetaInfo?appId=xxxxxxxx&amp;amp;lang=J&amp;amp;statsDataId=0003384123&amp;quot;
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; standalone=&amp;quot;yes&amp;quot;?&amp;gt;
&amp;lt;GET_META_INFO xsi:noNamespaceSchemaLocation=&amp;quot;https://api.e-stat.go.jp/rest/1.0/schema/GetMetaInfo.xsd&amp;quot; xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&amp;gt;
&amp;lt;RESULT&amp;gt;
&amp;lt;STATUS&amp;gt;0&amp;lt;/STATUS&amp;gt;
&amp;lt;ERROR_MSG&amp;gt;正常に終了しました。&amp;lt;/ERROR_MSG&amp;gt;
&amp;lt;DATE&amp;gt;2021-12-24T18:35:07.926+09:00&amp;lt;/DATE&amp;gt;
&amp;lt;/RESULT&amp;gt;
&amp;lt;PARAMETER&amp;gt;
&amp;lt;LANG&amp;gt;J&amp;lt;/LANG&amp;gt;
&amp;lt;STATS_DATA_ID&amp;gt;0003384123&amp;lt;/STATS_DATA_ID&amp;gt;
&amp;lt;/PARAMETER&amp;gt;
&amp;lt;METADATA_INF&amp;gt;
&amp;lt;TABLE_INF id=&amp;quot;0003384123&amp;quot;&amp;gt;
&amp;lt;STAT_NAME code=&amp;quot;00100409&amp;quot;&amp;gt;国民経済計算&amp;lt;/STAT_NAME&amp;gt;
&amp;lt;GOV_ORG code=&amp;quot;00100&amp;quot;&amp;gt;内閣府&amp;lt;/GOV_ORG&amp;gt;
&amp;lt;STATISTICS_NAME&amp;gt;四半期別ＧＤＰ速報 過去の値 1次速報値&amp;lt;/STATISTICS_NAME&amp;gt;
&amp;lt;TITLE&amp;gt;形態別国内家計最終消費支出 年度デフレータ—　前年度比（1981年～）（2000暦年＝100）&amp;lt;/TITLE&amp;gt;
&amp;lt;SURVEY_DATE&amp;gt;201007-201009&amp;lt;/SURVEY_DATE&amp;gt;
&amp;lt;/TABLE_INF&amp;gt;
&amp;lt;CLASS_INF&amp;gt;
&amp;lt;CLASS_OBJ id=&amp;quot;tab&amp;quot; name=&amp;quot;表章項目&amp;quot; description=&amp;quot;Excelの書式設定で統計表の数値を&amp;amp;quot;-0.0&amp;amp;quot;としている場合、データベース上&amp;amp;quot;0.0&amp;amp;quot;として収録されているため、Excel統計表の数値とは必ずしも一致しない。&amp;quot;&amp;gt;
&amp;lt;CLASS code=&amp;quot;17&amp;quot; name=&amp;quot;前年度比&amp;quot; level=&amp;quot;&amp;quot; unit=&amp;quot;％&amp;quot;/&amp;gt;
&amp;lt;/CLASS_OBJ&amp;gt;
&amp;lt;CLASS_OBJ id=&amp;quot;cat01&amp;quot; name=&amp;quot;形態別国内家計最終消費支出&amp;quot;&amp;gt;
&amp;lt;CLASS code=&amp;quot;11&amp;quot; name=&amp;quot;家計最終消費支出（再掲）&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;12&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_居住者家計の海外での直接購入&amp;quot; level=&amp;quot;2&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;13&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_（控除）非居住者家計の国内での直接購入&amp;quot; level=&amp;quot;2&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;14&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_国内家計最終消費支出&amp;quot; level=&amp;quot;2&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;15&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_国内家計最終消費支出_耐久財&amp;quot; level=&amp;quot;3&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;16&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_国内家計最終消費支出_半耐久財&amp;quot; level=&amp;quot;3&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;17&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_国内家計最終消費支出_非耐久財&amp;quot; level=&amp;quot;3&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;18&amp;quot; name=&amp;quot;家計最終消費支出（再掲）_国内家計最終消費支出_サービス&amp;quot; level=&amp;quot;3&amp;quot;/&amp;gt;
&amp;lt;/CLASS_OBJ&amp;gt;
&amp;lt;CLASS_OBJ id=&amp;quot;time&amp;quot; name=&amp;quot;時間軸（年度）&amp;quot;&amp;gt;
&amp;lt;CLASS code=&amp;quot;1981100000&amp;quot; name=&amp;quot;1981年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1982100000&amp;quot; name=&amp;quot;1982年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1983100000&amp;quot; name=&amp;quot;1983年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1984100000&amp;quot; name=&amp;quot;1984年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1985100000&amp;quot; name=&amp;quot;1985年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1986100000&amp;quot; name=&amp;quot;1986年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1987100000&amp;quot; name=&amp;quot;1987年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1988100000&amp;quot; name=&amp;quot;1988年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&amp;lt;CLASS code=&amp;quot;1989100000&amp;quot; name=&amp;quot;1989年度&amp;quot; level=&amp;quot;1&amp;quot;/&amp;gt;
&lt;/code>&lt;/pre>&lt;p>上の方がデータ内容の説明なのか？よくわかりません。&lt;/p>
&lt;h2 id="統計情報取得">統計情報取得&lt;/h2>
&lt;pre tabindex="0">&lt;code>curl &amp;quot;http://api.e-stat.go.jp/rest/1.0/app/getStatsData?limit=10000&amp;amp;appId=xxxxxxxxxx&amp;amp;lang=J&amp;amp;statsDataId=0003384123&amp;amp;metaGetFlg=N&amp;amp;cntGetFlg=N&amp;quot;
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; standalone=&amp;quot;yes&amp;quot;?&amp;gt;
&amp;lt;GET_STATS_DATA xsi:noNamespaceSchemaLocation=&amp;quot;https://api.e-stat.go.jp/rest/1.0/schema/GetStatsData.xsd&amp;quot; xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&amp;gt;
&amp;lt;RESULT&amp;gt;
&amp;lt;STATUS&amp;gt;0&amp;lt;/STATUS&amp;gt;
&amp;lt;ERROR_MSG&amp;gt;正常に終了しました。&amp;lt;/ERROR_MSG&amp;gt;
&amp;lt;DATE&amp;gt;2021-12-24T18:37:22.156+09:00&amp;lt;/DATE&amp;gt;
&amp;lt;/RESULT&amp;gt;
&amp;lt;PARAMETER&amp;gt;
&amp;lt;LANG&amp;gt;J&amp;lt;/LANG&amp;gt;
&amp;lt;STATS_DATA_ID&amp;gt;0003384123&amp;lt;/STATS_DATA_ID&amp;gt;
&amp;lt;DATA_FORMAT&amp;gt;X&amp;lt;/DATA_FORMAT&amp;gt;
&amp;lt;START_POSITION&amp;gt;1&amp;lt;/START_POSITION&amp;gt;
&amp;lt;LIMIT&amp;gt;10000&amp;lt;/LIMIT&amp;gt;
&amp;lt;METAGET_FLG&amp;gt;N&amp;lt;/METAGET_FLG&amp;gt;
&amp;lt;CNT_GET_FLG&amp;gt;N&amp;lt;/CNT_GET_FLG&amp;gt;
&amp;lt;/PARAMETER&amp;gt;
&amp;lt;STATISTICAL_DATA&amp;gt;
&amp;lt;TABLE_INF id=&amp;quot;0003384123&amp;quot;&amp;gt;
&amp;lt;STAT_NAME code=&amp;quot;00100409&amp;quot;&amp;gt;国民経済計算&amp;lt;/STAT_NAME&amp;gt;
&amp;lt;GOV_ORG code=&amp;quot;00100&amp;quot;&amp;gt;内閣府&amp;lt;/GOV_ORG&amp;gt;
&amp;lt;STATISTICS_NAME&amp;gt;四半期別ＧＤＰ速報 過去の値 1次速報値&amp;lt;/STATISTICS_NAME&amp;gt;
&amp;lt;TITLE&amp;gt;形態別国内家計最終消費支出 年度デフレータ—　前年度比（1981年～）（2000暦年＝100）&amp;lt;/TITLE&amp;gt;
&amp;lt;SURVEY_DATE&amp;gt;201007-201009&amp;lt;/SURVEY_DATE&amp;gt;
&amp;lt;TOTAL_NUMBER&amp;gt;232&amp;lt;/TOTAL_NUMBER&amp;gt;
&amp;lt;FROM_NUMBER&amp;gt;1&amp;lt;/FROM_NUMBER&amp;gt;
&amp;lt;TO_NUMBER&amp;gt;232&amp;lt;/TO_NUMBER&amp;gt;
&amp;lt;/TABLE_INF&amp;gt;
&amp;lt;DATA_INF&amp;gt;
&amp;lt;NOTE char=&amp;quot;***&amp;quot;&amp;gt;数字が得られないもの&amp;lt;/NOTE&amp;gt;
&amp;lt;NOTE char=&amp;quot;-&amp;quot;&amp;gt;数字が得られないもの&amp;lt;/NOTE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1981100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;3.8&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1982100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;2.3&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1983100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;2&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1984100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;2.2&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1985100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;1.2&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1986100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;0.1&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1987100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;0.5&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1988100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;0.5&amp;lt;/VALUE&amp;gt;
&amp;lt;VALUE tab=&amp;quot;17&amp;quot; cat01=&amp;quot;11&amp;quot; time=&amp;quot;1989100000&amp;quot; unit=&amp;quot;％&amp;quot;&amp;gt;2.5&amp;lt;/VALUE&amp;gt;
&lt;/code>&lt;/pre>&lt;p>VALUEが値みたいですがどういう列情報になっているのでしょうか？&lt;br>
とりあえずAPIはお手軽に叩けることがわかりました。&lt;br>
次回以降はデータの内容を理解していこうと思います。&lt;/p></description></item><item><title>【ssh/Bash】sshでログインして実行して自動的に抜けて返ってくる最も簡単な方法</title><link>https://suzukiiichiro.github.io/posts/2021-12-24-01-suzuki/</link><pubDate>Fri, 24 Dec 2021 11:55:21 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-24-01-suzuki/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-24-01-suzuki/2021-12-23-bash.jpg" alt="Featured image of post 【ssh/Bash】sshでログインして実行して自動的に抜けて返ってくる最も簡単な方法" />&lt;h2 id="関連記事">関連記事&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/" target="_blank" rel="noopener"
>【wLu】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/" target="_blank" rel="noopener"
>【unComp】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/" target="_blank" rel="noopener"
>【プログレスバー】Bashでプログレスバーを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-21-01-suzuki/" target="_blank" rel="noopener"
>【ssh/bash】ssh/Bashでサーバーへログイン・実行・ログアウトの一連自動化処理を作ってみようって話&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="やりたいこと">やりたいこと&lt;/h2>
&lt;p>sshでサーバーにログインして、なんらかのコマンドを実行しターミナルに表示、ミッション終了後、ターミナルを自動的にログアウトしてローカルに何事もなかったかのようにもどってくる最も簡単な方法ってなにかないでしょうか。&lt;/p>
&lt;h2 id="イメージ">イメージ&lt;/h2>
&lt;p>従来の方法&lt;/p>
&lt;pre tabindex="0">&lt;code>ローカルＰＣのターミナル
↓ Linuxサーバーにログイン
$df $uptime などを実行
↓ Linuxサーバーをログアウト
ローカルＰＣにもどる
&lt;/code>&lt;/pre>&lt;p>これからつくるBash/ssh&lt;/p>
&lt;pre tabindex="0">&lt;code>ローカルＰＣのターミナル
↓
Linuxサーバーにログイン
$df $uptime などを実行
Linuxサーバーをログアウト
↓
ローカルＰＣのターミナルにもどる
&lt;/code>&lt;/pre>&lt;p>わかりにくいですか？&lt;br>
まず、メリットとしてサーバーでコマンドからログアウトする必要がありません。&lt;br>
これができれば、一台一台サーバーのヘルスチェックをせずとも、数十台のサーバーを&lt;br>
順番に訪ね歩きファイルに出力する事も可能です。&lt;/p>
&lt;p>以下、ソースです。&lt;/p>
&lt;pre tabindex="0">&lt;code>#!/usr/bin/bash
##############################################
# sshでサーバーにログインして、なんらかのコマンドを
# 実行しターミナルに表示、ミッション終了後、ターミ
# ナルを自動的にログアウトしてローカルに何事もなか
# ったかのようにもどってくる最も簡単シェルスクリプト
##############################################
#
# サーバーのＩＰアドレスとか
SERVER=&amp;quot;centos@xx.xx.xx.xxx&amp;quot;
# 実行したいコマンドを &amp;amp;&amp;amp; でつなぐ
COMMAND=&amp;quot;uptime &amp;amp;&amp;amp; df -h&amp;quot;;
echo &amp;quot;centosサーバーログイン&amp;quot;;
# ポイントは -t です。
ssh $SERVER -t $COMMAND;
echo &amp;quot;centosサーバーログアウト&amp;quot;;
exit;
&lt;/code>&lt;/pre>&lt;p>たったこれだけですが、この工夫により多くのサーバーを&lt;br>
スクリプトで一括回遊することができます。 お試しあれ。&lt;/p></description></item><item><title>SCSS/CSSを含んだファイルがGitHub Actionsでビルドできない</title><link>https://suzukiiichiro.github.io/posts/2021-12-24-hugo-ywat/</link><pubDate>Fri, 24 Dec 2021 09:43:41 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-24-hugo-ywat/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-24-hugo-ywat/af7ef3c0-44c1-4f2f-aad8-1a0664724558.jpg" alt="Featured image of post SCSS/CSSを含んだファイルがGitHub Actionsでビルドできない" />&lt;p>hugoでscssやsassを含んだファイルををGitHubに公開、Git Actionで自動ビルドしようとした際に、見慣れないエラーが表示された&lt;/p>
&lt;pre tabindex="0">&lt;code>Run hugo --minify
Error: Error building site: TOCSS:
failed to transform &amp;quot;scss/style.scss&amp;quot; (text/x-scss).
Check your Hugo installation;
you need the extended version to build SCSS/SASS.
: this feature is not available in your current Hugo version,
see https://goo.gl/YMrWcn for more information
...
Total in 148 ms
Error: Process completed with exit code 255.
&lt;/code>&lt;/pre>&lt;p>はて？なにか悪いことでもしたのだろうか。&lt;br>
それとも変な記述をしてしまったのだろうか。&lt;/p>
&lt;h2 id="エラーの内容">エラーの内容&lt;/h2>
&lt;p>こういうときは、落ち着いてエラーを見てみよう。&lt;br>
大抵のことはちゃんと教えてくれているはずだ。&lt;/p>
&lt;pre tabindex="0">&lt;code>Check your Hugo installation; you need the extended version
&lt;/code>&lt;/pre>&lt;p>なるほど、extended を使えと行っている。&lt;br>
extended とはなんだろう。&lt;/p>
&lt;h2 id="エラーの対応">エラーの対応&lt;/h2>
&lt;p>さらに落ち着いて設定ファイルを確認することをおすすめする。&lt;br>
.github/workflow/gh-pages.yml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0.87.0&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#extended: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>設定の extended が思いっきりコメントアウトされていました&lt;/p>
&lt;p>コメントを外して、再度Gitにpushしたところ、正常にビルドされて公開できました。&lt;/p>
&lt;h2 id="まとめ">まとめ&lt;/h2>
&lt;p>scssやsassを含んだファイルをhugoをgitに公開しようとした際に、ビルドできない場合は設定を確認することをおすすめする。&lt;/p></description></item><item><title>【プログレスバー】Bashでプログレスバーを作ってみようって話</title><link>https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/</link><pubDate>Thu, 23 Dec 2021 16:10:20 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/2021-12-23-bash.jpg" alt="Featured image of post 【プログレスバー】Bashでプログレスバーを作ってみようって話" />&lt;h2 id="関連記事">関連記事&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/" target="_blank" rel="noopener"
>【wLu】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/" target="_blank" rel="noopener"
>【unComp】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/" target="_blank" rel="noopener"
>【プログレスバー】Bashでプログレスバーを作ってみようって話&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="プログレスバー">プログレスバー&lt;/h2>
&lt;p>ターミナルで、処理の進捗が表示されるプログレスバーというのがあります。&lt;br>
処理が進むにつれて、ジリジリとメーターが右に増えていくあれです。&lt;br>
シェルスクリプトでも作れないものかとチャレンジしたので参考にして下さい&lt;/p>
&lt;h2 id="使い方">使い方&lt;/h2>
&lt;p>処理のループ中に以下の1行を追記します。&lt;/p>
&lt;pre tabindex="0">&lt;code>progress &amp;quot;$#&amp;quot; &amp;quot;$MAX&amp;quot;; set - &amp;quot;$@&amp;quot; count ;
&lt;/code>&lt;/pre>&lt;h2 id="実行手順">実行手順&lt;/h2>
&lt;p>以下のソースコードを適当なファイル名で保存して下さい。ここではProgress.shとします。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ :&amp;gt; Progress.sh
$ vim Progress.sh
# vimで以下のソースコードを貼り付けて保存
# ソースコードのファイルエンコードをUTF-8に変更します。
$ nkf -wLu Progress.sh &amp;gt; Progress.sh.utf8
# ファイルエンコードを変更したファイルを元のファイル名にリネームします。
$ mv Progress.sh.utf8 Progress.sh
# 実行権限を付与します
$ chmod +x Progress.sh
# 実行
$ ./Progress.sh
&lt;/code>&lt;/pre>&lt;h2 id="ソースコード">ソースコード&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#! /bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>
&lt;span class="c1">#######################################&lt;/span>
&lt;span class="c1"># 進捗を表示するプログレスバー&lt;/span>
&lt;span class="c1"># &lt;/span>
&lt;span class="c1">#######################################&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="c1"># percent $1 &lt;/span>
&lt;span class="c1"># GT $2&lt;/span>
progress&lt;span class="o">(){&lt;/span>
&lt;span class="nv">percent&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">GT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">column&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>expr &lt;span class="m">71&lt;/span> &lt;span class="se">\*&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$percent&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> / &lt;span class="nv">$GT&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nv">nspace&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>expr &lt;span class="m">71&lt;/span> - &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$column&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">#プログレスバーのカーソルを左端に戻すリターンコードと[の文字をbarに代入&lt;/span>
&lt;span class="nv">bar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;\r[&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">#位置パラメータの数($#)を１にリセット（カウンタとして流用）&lt;/span>
&lt;span class="nb">set&lt;/span> dummy &lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$#&lt;/span> -le &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$column&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span>
&lt;span class="nv">bar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$bar&lt;/span>&lt;span class="s1">&amp;#39;=&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># barに=を追加&lt;/span>
&lt;span class="nb">set&lt;/span> - &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> dummy&lt;span class="p">;&lt;/span> &lt;span class="c1"># $#をインクリメント&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;span class="nv">bar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$bar&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">#barの先端に&amp;gt;を追加&lt;/span>
&lt;span class="c1">#位置パラメータの数($#)を１にリセット（カウンタとして流用）&lt;/span>
&lt;span class="nb">set&lt;/span> dummy &lt;span class="p">;&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$#&lt;/span> -le &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$nspace&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nv">bar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$bar&lt;/span>&lt;span class="s1">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="nb">set&lt;/span> - &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> dummy&lt;span class="p">;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;span class="nv">bar&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$bar&lt;/span>&lt;span class="s1">&amp;#39;]&amp;#39;&lt;/span>&lt;span class="nv">$percent&lt;/span>/&lt;span class="nv">$GT&lt;/span>&lt;span class="s1">&amp;#39;\c&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># barに]と１行分のプログレスバーを表示&lt;/span>
&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$bar&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="c1">#######################################&lt;/span>
&lt;span class="c1"># メイン処理&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="nb">set&lt;/span> count &lt;span class="p">;&lt;/span>
&lt;span class="nv">MAX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">100&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="c1">#最大値を100とする。実際に掛かる処理数の最大値を入れて下さい。&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="k">for&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="nv">i&lt;/span>&lt;span class="o">=&lt;/span>0&lt;span class="p">;&lt;/span> i&amp;lt;&lt;span class="nv">$MAX&lt;/span>&lt;span class="p">;&lt;/span> i++&lt;span class="o">)){&lt;/span>
&lt;span class="c1"># ループする処理に以下の一行を埋め込めばプログレスバーが表示されます。&lt;/span>
progress &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$#&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$MAX&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">set&lt;/span> - &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> count &lt;span class="p">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="c1">#&lt;/span>
&lt;span class="c1">#終了&lt;/span>
&lt;span class="nb">exit&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="使い方-1">使い方&lt;/h2>
&lt;p>シェルスクリプトで自作したなんらかの処理ファイルにprogress()関数を貼り付けます。&lt;/p>
&lt;p>自作ソースの中のループ処理の関数の頭に以下を追記します。&lt;br>
MAX=100; は、処理の最大値を指定します。&lt;br>
処理のループ最大数が150回であれば、以下の通りに修正します。&lt;/p>
&lt;pre tabindex="0">&lt;code>set count;
MAX=150;
&lt;/code>&lt;/pre>&lt;p>forやwhileループ処理の中に以下を埋め込みます。&lt;/p>
&lt;pre tabindex="0">&lt;code>progress &amp;quot;$#&amp;quot; &amp;quot;$MAX&amp;quot;; set - &amp;quot;$@&amp;quot; count ;
&lt;/code>&lt;/pre>&lt;p>最後にforまたはwhileループを抜けた後に&lt;/p>
&lt;pre tabindex="0">&lt;code>echo &amp;quot;&amp;quot;;
&lt;/code>&lt;/pre>&lt;p>を追加します。これだけです。&lt;/p>
&lt;h2 id="実行結果">実行結果&lt;/h2>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 160;
flex-basis: 384px"
>
&lt;a href="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/progress.gif" data-size="640x400">
&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/progress.gif"
width="640"
height="400"
srcset="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/progress_hu82b3c24b65bc35ce8f36dc9d39d1cc0e_130983_480x0_resize_box.gif 480w, https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/progress_hu82b3c24b65bc35ce8f36dc9d39d1cc0e_130983_1024x0_resize_box.gif 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p></description></item><item><title>【unComp】Bashで便利なコマンドを作ってみようって話</title><link>https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/</link><pubDate>Thu, 23 Dec 2021 13:11:13 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/2021-12-23-bash.jpg" alt="Featured image of post 【unComp】Bashで便利なコマンドを作ってみようって話" />&lt;h2 id="関連記事">関連記事&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/" target="_blank" rel="noopener"
>【wLu】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/" target="_blank" rel="noopener"
>【unComp】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/" target="_blank" rel="noopener"
>【プログレスバー】Bashでプログレスバーを作ってみようって話&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="できること">できること&lt;/h2>
&lt;p>圧縮されているファイルを、ファイルの拡張子にあわせて解凍すると言う作業は、日常的に多いものです。今回は、圧縮ファイルの拡張子を判断して自動的に解凍するシェルスクリプトを作成してみます。&lt;/p>
&lt;h2 id="圧縮ファイルと実行コマンドパラメータ一覧">圧縮ファイルと実行コマンド、パラメータ一覧&lt;/h2>
&lt;pre tabindex="0">&lt;code> 拡張子 パラメータ
tgz | tar.gz tar zxvf
tar.Z gunzip
tar.bz2 tar xvfj
tar tar xvfz
gz gunzip
Z gunzip
bz2 bunzip2
zip unzip
&lt;/code>&lt;/pre>&lt;p>こうしたコマンドやパラメータを覚えておくことは大切ですが、頭の経年劣化とともに、つい思い出すことができず、Googleで検索して調べると言ったことは、往々にしてあることです。&lt;/p>
&lt;h2 id="実行例">実行例&lt;/h2>
&lt;pre tabindex="0">&lt;code># 圧縮ファイルを解凍する便利な unCompコマンド
$ unComp comp.tar.gz2
&lt;/code>&lt;/pre>&lt;h2 id="作成">作成&lt;/h2>
&lt;p>まずファイルを作ります。ファイル名は unComp とします&lt;/p>
&lt;pre tabindex="0">&lt;code># unComp というファイルを作成
$ :&amp;gt; unComp
# vim で unComp を開く
$ vim unComp
&lt;/code>&lt;/pre>&lt;p>unCompファイルに以下の内容を貼り付ける&lt;/p>
&lt;pre tabindex="0">&lt;code>#!/bin/bash
#
#圧縮されているファイルを解凍する
# unComp を /usr/local/bin/にコピーすると
# 通常のコマンドとして本実行ファイルを利用する事が出来ます。
#
# cp unComp /usr/local/bin/unComp
#
# 実行例
# $ unComp filename(圧縮ファイル)
#
if [ $# -ne 1 ]; then
echo &amp;quot;&amp;quot;
exit ;
fi
#
case $1 in
*.tgz | *.tar.gz) tar zxvf $1 ;;
*.tar.Z) gunzip $1
tar xvf $( echo &amp;quot;$1&amp;quot; | sed 's/\.Z$//')
;;
*.tar.bz2) tar xvfj $1;;
*.tar) tar xvfz $1;;
*.gz) gunzip $1;;
*.Z) gunzip $1;;
*.bz2) bunzip2 $1;;
*.zip) unzip $1;;
*) echo &amp;quot;ファイルの拡張子が対応していません:$1&amp;quot;
esac
exit ;
&lt;/code>&lt;/pre>&lt;p>作成したファイルには日本語が含まれているため、unCompファイルを UTF-8に変換しておきます。&lt;br>
&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/" title="wLu"
target="_blank" rel="noopener"
>wLu&lt;/a>をつかってUTF-8に変換するとさらに便利です。&lt;/p>
&lt;pre tabindex="0">&lt;code># unComp ファイルをnkf -wLu でUTF-8に変換
$ nkf -wLu unComp &amp;gt; unComp.txt
# unComp.txtをunCompにリネームします
$ mv unComp.txt unComp
# 作成したunCompコマンドファイルを/usr/local/bin にコピーします
$ sudo unComp /usr/local/bin/
# コマンドが配置されたかを確認
$ which unComp
$ /usr/local/bin/unComp
&lt;/code>&lt;/pre>&lt;h3 id="使い方">使い方&lt;/h3>
&lt;pre tabindex="0">&lt;code># 圧縮ファイルの拡張子を気にせずをコマンド一発で解凍する
# 実行
$ unComp sample.zip
&lt;/code>&lt;/pre>&lt;p>圧縮ファイルの拡張子に併せたコマンドを思い出したり、さらにはコマンドのパラメータをGoogleで調べたりする必要が減ります。必要に応じて、ソースにコマンドやパラメータを追加すれば、さらに拡張できます。&lt;br>
便利ですね。&lt;/p></description></item><item><title>【wLu】Bashで便利なコマンドを作ってみようって話</title><link>https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/</link><pubDate>Thu, 23 Dec 2021 10:27:27 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/2021-12-23-bash.jpg" alt="Featured image of post 【wLu】Bashで便利なコマンドを作ってみようって話" />&lt;h2 id="関連記事">関連記事&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-suzuki/" target="_blank" rel="noopener"
>【wLu】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-02-suzuki/" target="_blank" rel="noopener"
>【unComp】Bashで便利なコマンドを作ってみようって話&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://suzukiiichiro.github.io/posts/2021-12-23-03-suzuki/" target="_blank" rel="noopener"
>【プログレスバー】Bashでプログレスバーを作ってみようって話&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="必要なもの">必要なもの&lt;/h2>
&lt;p>ネットワーク漢字フィルター nkf&lt;br>
※macの場合、&lt;a class="link" href="https://brew.sh/index_ja" title="Homebrew"
target="_blank" rel="noopener"
>Homebrew&lt;/a> が必要になります。&lt;/p>
&lt;h2 id="nkf-インストールの手順">nkf インストールの手順&lt;/h2>
&lt;p>まず、nkfがインストールされているかを確認します。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ which nkf
/usr/local/bin/nkf
&lt;/code>&lt;/pre>&lt;p>インストールされていない場合、macの場合はbrewでインストールします。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ brew install nkf
&lt;/code>&lt;/pre>&lt;p>インストールしようとすると以下のエラーが出ることがあります&lt;/p>
&lt;pre tabindex="0">&lt;code>Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
Could not symlink share/man/ja/man1/nkf.1
/usr/local/share/man/ja/man1 is not writable.
&lt;/code>&lt;/pre>&lt;p>権限周りを下記のコマンドを打って変更します。&lt;/p>
&lt;pre tabindex="0">&lt;code>sudo chmod 775 /usr/local/share/man/ja/man1
sudo chown &amp;lt;ユーザ名&amp;gt;:admin /usr/local/share/man/ja/man1
&lt;/code>&lt;/pre>&lt;p>下記のページを参考にさせていただきました&lt;/p>
&lt;p>&lt;iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.kozakana.net%2F2018%2F09%2Fhomebrew_link_error%2F" title="Homebrewでインストール時にlinkが出来ないエラー | Simple is Beautiful." class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;">&lt;/iframe>&lt;/p>
&lt;p>コマンドを確認します。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ nkf -v
Network Kanji Filter Version 2.1.5 (2018-12-15)
Copyright (C) 1987, FUJITSU LTD. (I.Ichikawa).
Copyright (C) 1996-2018, The nkf Project.
&lt;/code>&lt;/pre>&lt;h2 id="使い方">使い方&lt;/h2>
&lt;p>nkfコマンドとは？&lt;br>
「nkf」は「Network Kanji Filter」の略で、LinuxとWindowsなど、異なるOS間でテキストデータを交換する際に問題となる文字コードと改行コードを変換するためのコマンドです。&lt;/p>
&lt;p>nkfコマンドの書式&lt;br>
nkf オプション ファイル名&lt;/p>
&lt;p>UTF-8に変換する場合は、オプションに wLu をつけて変換します。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ nkf -wLu isofile.txt &amp;gt; utf8.txt
&lt;/code>&lt;/pre>&lt;h3 id="変換の流れ手動編">変換の流れ（手動編）&lt;/h3>
&lt;p>元ファイル moto.txt (UTF-8以外のファイルエンコード、改行コード）&lt;br>
↓&lt;br>
変換後のファイル ato.txt(UTF-8に変換したファイル）&lt;br>
↓&lt;br>
変換後のファイルをリネームする&lt;/p>
&lt;pre tabindex="0">&lt;code># UTF-8に変換
$ nkf -wLu moto.txt &amp;gt; ato.txt
# 変換後のファイルを元のファイル名にリネームする
$ mv ato.txt moto.txt
# vimiでファイルエンコードを確認する
$ vim moto.txt
&lt;/code>&lt;/pre>&lt;p>面倒ですね。ここで、一発でUTF-8に変換するコマンドを作成してみます。&lt;/p>
&lt;h3 id="変換の流れ自動編">変換の流れ（自動編）&lt;/h3>
&lt;pre tabindex="0">&lt;code># UTF-8に変換 wLu コマンドをこれから自作します
$ wLu moto.txt
$ vim moto.txt ← UTF-8 に変換されている！
&lt;/code>&lt;/pre>&lt;h3 id="コマンドの内容">コマンドの内容&lt;/h3>
&lt;p>まずファイルを作ります。ファイル名は wLu とします&lt;/p>
&lt;pre tabindex="0">&lt;code># wLu というファイルを作成
$ :&amp;gt; wLu
# vim で wLu を開く
$ vim wLu
&lt;/code>&lt;/pre>&lt;p>以下の内容をファイルに貼り付ける&lt;/p>
&lt;pre tabindex="0">&lt;code>#!/bin/bash
#################################################
# パラメータで渡されたファイル名をutf8に変換する
#
# 使い方
# wLu UTF-8に変換したいファイル名
# wLu を /usr/local/bin/にコピーすると
# 通常のコマンドとして本実行ファイルを利用する事が出来ます。
#
#################################################
#
filename=&amp;quot;$1&amp;quot; ;
#
function wLu(){
if [ -f &amp;quot;$filename&amp;quot; ]; then
cat &amp;quot;$filename&amp;quot; | nkf -wLu &amp;gt; &amp;quot;$filename&amp;quot;.u ;
mv &amp;quot;$filename&amp;quot;.u &amp;quot;$filename&amp;quot; ;
fi
}
#
if ! which nkf &amp;gt;/dev/null 2&amp;gt;&amp;amp;1; then
echo &amp;quot;nkf がありません&amp;quot; ;
echo &amp;quot;nkf をインストールして下さい&amp;quot; ;
exit ;
fi
#
if [ -z &amp;quot;$filename&amp;quot; ] ; then
echo &amp;quot;第一引数にファイル名を指定して下さい&amp;quot;
echo &amp;quot;実行例： wLu filename&amp;quot; ;
exit ;
fi
# 実行
wLu ;
# 終了
exit ;
&lt;/code>&lt;/pre>&lt;p>作成したファイルには日本語が含まれているため、wLuファイルを UTF-8に変換しておきます。&lt;/p>
&lt;pre tabindex="0">&lt;code># wLu ファイルをnkf -wLu でUTF-8に変換
$ nkf -wLu wLu &amp;gt; wLu.txt
# wLu.txtをwLuにリネームします
$ mv wLu.txt wLu
# 作成したwLuコマンドファイルを/usr/local/bin にコピーします
$ sudo wLu /usr/local/bin/
# コマンドが配置されたかを確認
$ which wLu
$ /usr/local/bin/wLu
&lt;/code>&lt;/pre>&lt;h3 id="使い方-1">使い方&lt;/h3>
&lt;pre tabindex="0">&lt;code># UTF-8以外のファイルエンコードファイル
$ cat moto.txt
$ wLu moto.txt
&lt;/code>&lt;/pre>&lt;p>変換結果を一時ファイルにし、リネームする手間が省けます。&lt;br>
便利ですね。&lt;/p></description></item><item><title>hugo で failed to unmarshal YAML: yaml: control characters are not allowed エラー</title><link>https://suzukiiichiro.github.io/posts/2021-12-21-03/</link><pubDate>Wed, 22 Dec 2021 21:22:23 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-21-03/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-21-03/error.jpg" alt="Featured image of post hugo で failed to unmarshal YAML: yaml: control characters are not allowed エラー" />&lt;h2 id="エラーの内容">エラーの内容&lt;/h2>
&lt;p>記事投稿時にfailed to unmarshal YAM エラーが起こった時の原因について&lt;br>
hugo new ファイル名 で投稿用のエントリーを作成し、いざhugo コマンドで記事をアップしようとした時に以下のエラーが出ました。&lt;/p>
&lt;p>Start building sites …&lt;br>
Total in 10 ms&lt;br>
Error: Error building site: &amp;ldquo;/xxxx/xxxx/xxxx.github.io/content/posts/2021-12-21-03.md:2:1&amp;rdquo;: failed to unmarshal YAML: yaml: control characters are not allowed&lt;/p>
&lt;h2 id="原因">原因&lt;/h2>
&lt;p>このようなエラーが出る場合原因として考えられるのがファイルの文字コードがUTF-8になってないことです。&lt;br>
vim でファイル名を開くと右下に文字コードが表示されますが「iso-2022-jp-3」のようになってませんでしょうか？&lt;/p>
&lt;h2 id="対応">対応&lt;/h2>
&lt;p>この場合ファイルの文字コードをUTF8に変更してみましょう。&lt;/p>
&lt;pre tabindex="0">&lt;code>nkf -wLu ファイル名 &amp;gt;一時保存ファイル名;
mv 一時保存ファイル名 ファイル名
&lt;/code>&lt;/pre>&lt;p>一時保存した後にmvで戻したり面倒ですよね。&lt;br>
面倒を回避できる素晴らしいコマンドがgithubに上がっていますのでこちらもご利用ください。&lt;br>
&lt;a class="link" href="https://github.com/suzukiiichiro/linuxConfig/blob/master/wLu" target="_blank" rel="noopener"
>https://github.com/suzukiiichiro/linuxConfig/blob/master/wLu&lt;/a>&lt;/p>
&lt;p>hugo new した時に日本語が含まれていたら文字コードutf8になると思われるので設定で回避できないか次回調べてみたいと思います。&lt;/p></description></item><item><title>プライバシーポリシーページを設置する</title><link>https://suzukiiichiro.github.io/posts/2021-12-21-02/</link><pubDate>Wed, 22 Dec 2021 17:40:27 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-21-02/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-21-02/privacy.jpg" alt="Featured image of post プライバシーポリシーページを設置する" />&lt;p>github pagesでもgoogle adsenseの審査に通過したい！&lt;/p>
&lt;p>ということで色々先人の方達のサイトをみさせていただいたところ&lt;/p>
&lt;p>google adsenseを通過するためにはプライバシーポリシーが必要ということで準備しました。&lt;/p>
&lt;h2 id="内容はとりあえずコピペで行こう">内容はとりあえずコピペで行こう&lt;/h2>
&lt;p>まずはコピペOKの親切な方のサイトを探します。&lt;/p>
&lt;p>内容については以下のサイトを参考にさせていただきました。&lt;br>
&lt;a class="link" href="http://liberty-life-blog.com/wordpress/privacy-policy/" target="_blank" rel="noopener"
>http://liberty-life-blog.com/wordpress/privacy-policy/&lt;/a>&lt;/p>
&lt;h2 id="設定">設定&lt;/h2>
&lt;p>以下のコマンドでhugoでページを作成します。&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo new page/privacy.md
&lt;/code>&lt;/pre>&lt;p>コンテンツの構成を以下のように管理しているのでpage以下に保存しました。&lt;br>
content/posts &amp;ndash; 記事&lt;br>
/page &amp;ndash; about usページなど&lt;br>
/assetes &amp;ndash; 画像など&lt;/p>
&lt;pre tabindex="0">&lt;code>vim content/page/privacy.md
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>---
title: &amp;quot;Privacy&amp;quot;
date: 2021-12-22T17:16:15+09:00
draft: false
---
&lt;/code>&lt;/pre>&lt;p>ページの内容を２個目の&amp;mdash;以下に貼り付けます&lt;br>
draft: true に変更します&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo
&lt;/code>&lt;/pre>&lt;p>ビルドします&lt;/p>
&lt;h2 id="フッターにリンクを置こう">フッターにリンクを置こう&lt;/h2>
&lt;p>フッターの内容を修正してプライバシーポリシーのリンクを設置します。&lt;br>
themes以下にあるファイルを直接書き換えるのではなく&lt;br>
layoutsフォルダ以下に同名のファイルを作成することで上書きすることができるみたいです。&lt;/p>
&lt;p>layouts/partial/footer/footer.html&amp;lt;&amp;ndash;優先順位高い&lt;br>
themes/テーマ名/layouts/partial/footer/footer.html&lt;/p>
&lt;p>layouts/partial/footer/footer.html を新規に作成して&lt;br>
以下の内容を入力&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;footer class=&amp;quot;site-footer&amp;quot;&amp;gt;
&amp;lt;a href=&amp;quot;{{ .Site.BaseURL }}privacy/&amp;quot;&amp;gt;プライバシーポリシー&amp;lt;/a&amp;gt;
&amp;lt;section class=&amp;quot;copyright&amp;quot;&amp;gt;
&amp;amp;copy;
{{ if and (.Site.Params.footer.since) (ne .Site.Params.footer.since (int (now.Format &amp;quot;2006&amp;quot;))) }}
{{ .Site.Params.footer.since }} -
{{ end }}
{{ now.Format &amp;quot;2006&amp;quot; }} {{ .Site.Title }}
&amp;lt;/section&amp;gt;
&amp;lt;/footer&amp;gt;
&lt;/code>&lt;/pre>&lt;p>リンクの書き方が&lt;br>
{{ .Site.BaseURL }}privacy/&lt;br>
のは注意&lt;/p></description></item><item><title>デザイナーでもできる初めてのHugo #01</title><link>https://suzukiiichiro.github.io/posts/2021-12-22-hugo-01-ywat/</link><pubDate>Wed, 22 Dec 2021 13:07:49 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-22-hugo-01-ywat/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-22-hugo-01-ywat/2021-12-22-hugo-01.jpg" alt="Featured image of post デザイナーでもできる初めてのHugo #01" />&lt;p>CMSではWordpressが有名ですが、phpやサーバの準備などに時間がかかってしまったり、ちょっと敷居が高いイメージがあります。&lt;br>
Wordpressのインストールのためにはサーバも必要ですし、ドメインだって必要です。&lt;br>
色々用意するのが手間だなと思う人にはHugo+GitHubでさっくりサイトを作るのがおすすめです。&lt;br>
無料で、httpsも設定できるので非常に便利です。&lt;/p>
&lt;h2 id="hugoのインストール">Hugoのインストール&lt;/h2>
&lt;p>Hugoを使うためにはhugoをインストールする必要があります。&lt;br>
インストールは簡単です。&lt;/p>
&lt;p>&lt;small>※端末はMacで進めていきます。開発なども便利なのでMacを持っていると何かと便利ですよ。&lt;/small>&lt;/p>
&lt;p>&lt;a class="link" href="https://brew.sh/index_ja" title="Homebrew"
target="_blank" rel="noopener"
>Homebrew&lt;/a> が必要になります。&lt;/p>
&lt;pre tabindex="0">&lt;code>brew install hugo
&lt;/code>&lt;/pre>&lt;h2 id="設定">設定&lt;/h2>
&lt;p>hugoのインストールが終わったら、サイトを作成します。&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo new site ＜作成するディレクトリ＞
&lt;/code>&lt;/pre>&lt;p>色々表示されているかと思いますが、気にしないで大丈夫です。&lt;/p>
&lt;h3 id="設定ファイル">設定ファイル&lt;/h3>
&lt;p>hugoの設定はTOMLという形式で記述します。&lt;br>
TOMLに慣れていない人はJSONやYAMLといった形式でも記述できます。&lt;br>
その場合はconfig.tomlを削除して下さい。&lt;/p>
&lt;pre tabindex="0">&lt;code>baseURL = &amp;quot;http://example.org/&amp;quot;
languageCode = &amp;quot;en-us&amp;quot;
title = &amp;quot;My New Hugo Site&amp;quot;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>baseURL: サイトの公開URL&lt;/li>
&lt;li>languageCode: HTMLのlang部分&lt;/li>
&lt;li>title: サイトの名前&lt;/li>
&lt;/ul>
&lt;h2 id="記事の投稿">記事の投稿&lt;/h2>
&lt;p>記事を作成するにはコマンドを打つ必要があります&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo new posts/helloworld.md
&lt;/code>&lt;/pre>&lt;p>このコマンドで、postsディレクトリ以下にhelloworld.mdといったファイルが生成されます&lt;br>
テーマによってはpostsディレクトリではなく、postであったりするので、テーマの詳細を確認して下さい。&lt;/p>
&lt;h2 id="下書きから公開へ">下書きから公開へ&lt;/h2>
&lt;p>作成されたファイルはmarkdown形式で記述されています。&lt;/p>
&lt;pre tabindex="0">&lt;code>---
title: &amp;quot;helloworld&amp;quot;
date: 2021-12-22T11:23:09Z
draft: true
---
&lt;/code>&lt;/pre>&lt;p>draft の部分が下書き状態を表しています。&lt;br>
trueにすることで公開となり表示されます。&lt;/p>
&lt;h2 id="確認">確認&lt;/h2>
&lt;p>サイトの確認を行うには&lt;br>
hugoをインストールしたディレクトリで&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo server
&lt;/code>&lt;/pre>&lt;p>を実行します。&lt;br>
この場合は公開されている記事のみを表示した状態のサーバが立ち上がります。&lt;br>
未公開も含めたい場合は&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo server -D
&lt;/code>&lt;/pre>&lt;p>とすることで表示できます。&lt;/p>
&lt;h2 id="公開">公開&lt;/h2>
&lt;p>公開をするにはサイト全体を構築し直す必要があります。&lt;/p>
&lt;pre tabindex="0">&lt;code>hugo
&lt;/code>&lt;/pre>&lt;p>このコマンドでサイト全体が自動的に生成されます。&lt;br>
作成されたサイトは初期状態ではpublicディレクトリに展開されます。&lt;br>
configの&lt;em>publicDir&lt;/em>に任意のディレクトリを設定することも可能です&lt;/p>
&lt;pre tabindex="0">&lt;code>publicDir = 'docs'
&lt;/code>&lt;/pre>&lt;p>この場合はdocsディレクトリに公開ファイルが展開されます。&lt;/p>
&lt;h2 id="終わりに">終わりに&lt;/h2>
&lt;p>駆け足でしたが、hugoの簡単な使い方になります。&lt;br>
大きな設定も不要で、markdownで記述できるので初心者やデザイナーなどでもとっつきやすいのではないかと思います。&lt;br>
みなさんもぜひ、hugoを試してみて下さい。&lt;/p></description></item><item><title>Hugoでテーマが反映されない（画面が真っ白のまま）</title><link>https://suzukiiichiro.github.io/posts/2021-12-21/</link><pubDate>Tue, 21 Dec 2021 18:08:57 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-21/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-21/2021-12-21.jpg" alt="Featured image of post Hugoでテーマが反映されない（画面が真っ白のまま）" />&lt;p>Hugoでテーマが反映されない（画面が真っ白のまま）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">$ git submodule update --init --recursive
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hugoで記事の投稿の仕方</title><link>https://suzukiiichiro.github.io/posts/2021-12-21-01/</link><pubDate>Tue, 21 Dec 2021 18:08:57 +0900</pubDate><guid>https://suzukiiichiro.github.io/posts/2021-12-21-01/</guid><description>&lt;img src="https://suzukiiichiro.github.io/posts/2021-12-21-01/2021-12-21-1.jpg" alt="Featured image of post Hugoで記事の投稿の仕方" />&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">$ hugo new posts/&lt;span class="o">[&lt;/span>ファイル名&lt;span class="o">]&lt;/span>.md
$ vim content/posts/2021-12-21.md
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>draft: false&lt;/code> にする事でドラフトを公開にすることができる&lt;/p>
&lt;p>ビルドする&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">$ hugo
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>